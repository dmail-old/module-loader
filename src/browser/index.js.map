{"version":3,"file":"createLoader.js","sources":["../../node_modules/es-module-loader/core/common.js","../../node_modules/es-module-loader/core/loader-polyfill.js","../../node_modules/es-module-loader/core/resolve.js","../../node_modules/es-module-loader/core/register-loader.js","../createLoader.js","createLoader.js"],"sourcesContent":["/*\n * Environment\n */\nexport var isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined';\nexport var isNode = typeof process !== 'undefined' && process.versions && process.versions.node;\nexport var isWindows = typeof process !== 'undefined' && typeof process.platform === 'string' && process.platform.match(/^win/);\n\nvar envGlobal = typeof self !== 'undefined' ? self : global;\nexport { envGlobal as global }\n\n/*\n * Simple Symbol() shim\n */\nvar hasSymbol = typeof Symbol !== 'undefined';\nexport function createSymbol (name) {\n  return hasSymbol ? Symbol() : '@@' + name;\n}\n\nexport function pathToFileUrl (filePath) {\n  return 'file://' + (isWindows ? '/' : '') + (isWindows ? filePath.replace(/\\\\/g, '/') : filePath);\n}\n\nexport function fileUrlToPath (fileUrl) {\n  if (fileUrl.substr(0, 7) !== 'file://')\n    throw new RangeError(fileUrl + ' is not a valid file url');\n  if (isWindows)\n    return fileUrl.substr(8).replace(/\\\\/g, '/');\n  else\n    return fileUrl.substr(7);\n}\n\n/*\n * Environment baseURI\n */\nexport var baseURI;\n\n// environent baseURI detection\nif (typeof document != 'undefined' && document.getElementsByTagName) {\n  baseURI = document.baseURI;\n\n  if (!baseURI) {\n    var bases = document.getElementsByTagName('base');\n    baseURI = bases[0] && bases[0].href || window.location.href;\n  }\n}\nelse if (typeof location != 'undefined') {\n  baseURI = location.href;\n}\n\n// sanitize out the hash and querystring\nif (baseURI) {\n  baseURI = baseURI.split('#')[0].split('?')[0];\n  baseURI = baseURI.substr(0, baseURI.lastIndexOf('/') + 1);\n}\nelse if (typeof process != 'undefined' && process.cwd) {\n  baseURI = 'file://' + (isWindows ? '/' : '') + process.cwd();\n  if (isWindows)\n    baseURI = baseURI.replace(/\\\\/g, '/');\n}\nelse {\n  throw new TypeError('No environment baseURI');\n}\n\n// ensure baseURI has trailing \"/\"\nif (baseURI[baseURI.length - 1] !== '/')\n  baseURI += '/';\n\n/*\n * LoaderError with chaining for loader stacks\n */\nvar errArgs = new Error(0, '_').fileName == '_';\nfunction LoaderError__Check_error_message_for_loader_stack (childErr, newMessage) {\n  // Convert file:/// URLs to paths in Node\n  if (!isBrowser)\n    newMessage = newMessage.replace(isWindows ? /file:\\/\\/\\//g : /file:\\/\\//g, '');\n\n  var message = (childErr.message || childErr) + '\\n  ' + newMessage;\n\n  var err;\n  if (errArgs && childErr.fileName)\n    err = new Error(message, childErr.fileName, childErr.lineNumber);\n  else\n    err = new Error(message);\n\n\n  var stack = childErr.originalErr ? childErr.originalErr.stack : childErr.stack;\n\n  if (isNode)\n    // node doesn't show the message otherwise\n    err.stack = message + '\\n  ' + stack;\n  else\n    err.stack = stack;\n\n  err.originalErr = childErr.originalErr || childErr;\n\n  return err;\n}\nexport { LoaderError__Check_error_message_for_loader_stack as addToError }\n","import { addToError, createSymbol } from './common.js';\n\nexport { Loader, ModuleNamespace }\n\nvar resolvedPromise = Promise.resolve();\n\n/*\n * Simple Array values shim\n */\nfunction arrayValues (arr) {\n  if (arr.values)\n    return arr.values();\n\n  if (typeof Symbol === 'undefined' || !Symbol.iterator)\n    throw new Error('Symbol.iterator not supported in this browser');\n\n  var iterable = {};\n  iterable[Symbol.iterator] = function () {\n    var keys = Object.keys(arr);\n    var keyIndex = 0;\n    return {\n      next: function () {\n        if (keyIndex < keys.length)\n          return {\n            value: arr[keys[keyIndex++]],\n            done: false\n          };\n        else\n          return {\n            value: undefined,\n            done: true\n          };\n      }\n    };\n  };\n  return iterable;\n}\n\n/*\n * 3. Reflect.Loader\n *\n * We skip the entire native internal pipeline, just providing the bare API\n */\n// 3.1.1\nfunction Loader () {\n  this.registry = new Registry();\n}\n// 3.3.1\nLoader.prototype.constructor = Loader;\n\nfunction ensureInstantiated (module) {\n  if (!(module instanceof ModuleNamespace))\n    throw new TypeError('Module instantiation did not return a valid namespace object.');\n  return module;\n}\n\n// 3.3.2\nLoader.prototype.import = function (key, parent) {\n  if (typeof key !== 'string')\n    throw new TypeError('Loader import method must be passed a module key string');\n  // custom resolveInstantiate combined hook for better perf\n  var loader = this;\n  return resolvedPromise\n  .then(function () {\n    return loader[RESOLVE_INSTANTIATE](key, parent);\n  })\n  .then(ensureInstantiated)\n  //.then(Module.evaluate)\n  .catch(function (err) {\n    throw addToError(err, 'Loading ' + key + (parent ? ' from ' + parent : ''));\n  });\n};\n// 3.3.3\nvar RESOLVE = Loader.resolve = createSymbol('resolve');\n\n/*\n * Combined resolve / instantiate hook\n *\n * Not in current reduced spec, but necessary to separate RESOLVE from RESOLVE + INSTANTIATE as described\n * in the spec notes of this repo to ensure that loader.resolve doesn't instantiate when not wanted.\n *\n * We implement RESOLVE_INSTANTIATE as a single hook instead of a separate INSTANTIATE in order to avoid\n * the need for double registry lookups as a performance optimization.\n */\nvar RESOLVE_INSTANTIATE = Loader.resolveInstantiate = createSymbol('resolveInstantiate');\n\n// default resolveInstantiate is just to call resolve and then get from the registry\n// this provides compatibility for the resolveInstantiate optimization\nLoader.prototype[RESOLVE_INSTANTIATE] = function (key, parent) {\n  var loader = this;\n  return loader.resolve(key, parent)\n  .then(function (resolved) {\n    return loader.registry.get(resolved);\n  });\n};\n\nfunction ensureResolution (resolvedKey) {\n  if (resolvedKey === undefined)\n    throw new RangeError('No resolution found.');\n  return resolvedKey;\n}\n\nLoader.prototype.resolve = function (key, parent) {\n  var loader = this;\n  return resolvedPromise\n  .then(function() {\n    return loader[RESOLVE](key, parent);\n  })\n  .then(ensureResolution)\n  .catch(function (err) {\n    throw addToError(err, 'Resolving ' + key + (parent ? ' to ' + parent : ''));\n  });\n};\n\n// 3.3.4 (import without evaluate)\n// this is not documented because the use of deferred evaluation as in Module.evaluate is not\n// documented, as it is not considered a stable feature to be encouraged\n// Loader.prototype.load may well be deprecated if this stays disabled\n/* Loader.prototype.load = function (key, parent) {\n  return Promise.resolve(this[RESOLVE_INSTANTIATE](key, parent || this.key))\n  .catch(function (err) {\n    throw addToError(err, 'Loading ' + key + (parent ? ' from ' + parent : ''));\n  });\n}; */\n\n/*\n * 4. Registry\n *\n * Instead of structuring through a Map, just use a dictionary object\n * We throw for construction attempts so this doesn't affect the public API\n *\n * Registry has been adjusted to use Namespace objects over ModuleStatus objects\n * as part of simplifying loader API implementation\n */\nvar iteratorSupport = typeof Symbol !== 'undefined' && Symbol.iterator;\nvar REGISTRY = createSymbol('registry');\nfunction Registry() {\n  this[REGISTRY] = {};\n  this._registry = REGISTRY;\n}\n// 4.4.1\nif (iteratorSupport) {\n  // 4.4.2\n  Registry.prototype[Symbol.iterator] = function () {\n    return this.entries()[Symbol.iterator]();\n  };\n\n  // 4.4.3\n  Registry.prototype.entries = function () {\n    var registry = this[REGISTRY];\n    return arrayValues(Object.keys(registry).map(function (key) {\n      return [key, registry[key]];\n    }));\n  };\n}\n\n// 4.4.4\nRegistry.prototype.keys = function () {\n  return arrayValues(Object.keys(this[REGISTRY]));\n};\n// 4.4.5\nRegistry.prototype.values = function () {\n  var registry = this[REGISTRY];\n  return arrayValues(Object.keys(registry).map(function (key) {\n    return registry[key];\n  }));\n};\n// 4.4.6\nRegistry.prototype.get = function (key) {\n  return this[REGISTRY][key];\n};\n// 4.4.7\nRegistry.prototype.set = function (key, namespace) {\n  if (!(namespace instanceof ModuleNamespace))\n    throw new Error('Registry must be set with an instance of Module Namespace');\n  this[REGISTRY][key] = namespace;\n  return this;\n};\n// 4.4.8\nRegistry.prototype.has = function (key) {\n  return Object.hasOwnProperty.call(this[REGISTRY], key);\n};\n// 4.4.9\nRegistry.prototype.delete = function (key) {\n  if (Object.hasOwnProperty.call(this[REGISTRY], key)) {\n    delete this[REGISTRY][key];\n    return true;\n  }\n  return false;\n};\n\n/*\n * Simple ModuleNamespace Exotic object based on a baseObject\n * We export this for allowing a fast-path for module namespace creation over Module descriptors\n */\n// var EVALUATE = createSymbol('evaluate');\nvar BASE_OBJECT = createSymbol('baseObject');\n\n// 8.3.1 Reflect.Module\n/*\n * Best-effort simplified non-spec implementation based on\n * a baseObject referenced via getters.\n *\n * Allows:\n *\n *   loader.registry.set('x', new Module({ default: 'x' }));\n *\n * Optional evaluation function provides experimental Module.evaluate\n * support for non-executed modules in registry.\n */\nfunction ModuleNamespace (baseObject/*, evaluate*/) {\n  Object.defineProperty(this, BASE_OBJECT, {\n    value: baseObject\n  });\n\n  // evaluate defers namespace population\n  /* if (evaluate) {\n    Object.defineProperty(this, EVALUATE, {\n      value: evaluate,\n      configurable: true,\n      writable: true\n    });\n  }\n  else { */\n    Object.keys(baseObject).forEach(extendNamespace, this);\n  //}\n};\n// 8.4.2\nModuleNamespace.prototype = Object.create(null);\n\nif (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n  Object.defineProperty(ModuleNamespace.prototype, Symbol.toStringTag, {\n    value: 'Module'\n  });\n\nfunction extendNamespace (key) {\n  Object.defineProperty(this, key, {\n    enumerable: true,\n    get: function () {\n      return this[BASE_OBJECT][key];\n    }\n  });\n}\n\n/* function doEvaluate (evaluate, context) {\n  try {\n    evaluate.call(context);\n  }\n  catch (e) {\n    return e;\n  }\n}\n\n// 8.4.1 Module.evaluate... not documented or used because this is potentially unstable\nModule.evaluate = function (ns) {\n  var evaluate = ns[EVALUATE];\n  if (evaluate) {\n    ns[EVALUATE] = undefined;\n    var err = doEvaluate(evaluate);\n    if (err) {\n      // cache the error\n      ns[EVALUATE] = function () {\n        throw err;\n      };\n      throw err;\n    }\n    Object.keys(ns[BASE_OBJECT]).forEach(extendNamespace, ns);\n  }\n  // make chainable\n  return ns;\n}; */\n","import { isNode } from './common.js';\n\n/*\n * Optimized URL normalization assuming a syntax-valid URL parent\n */\nfunction throwResolveError () {\n  throw new RangeError('Unable to resolve \"' + relUrl + '\" to ' + parentUrl);\n}\nexport function resolveIfNotPlain (relUrl, parentUrl) {\n  var parentProtocol = parentUrl && parentUrl.substr(0, parentUrl.indexOf(':') + 1);\n\n  var firstChar = relUrl[0];\n  var secondChar = relUrl[1];\n\n  // protocol-relative\n  if (firstChar === '/' && secondChar === '/') {\n    if (!parentProtocol)\n      throwResolveError(relUrl, parentUrl);\n    return parentProtocol + relUrl;\n  }\n  // relative-url\n  else if (firstChar === '.' && (secondChar === '/' || secondChar === '.' && (relUrl[2] === '/' || relUrl.length === 2) || relUrl.length === 1)\n      || firstChar === '/') {\n    var parentIsPlain = !parentProtocol || parentUrl[parentProtocol.length] !== '/';\n\n    // read pathname from parent if a URL\n    // pathname taken to be part after leading \"/\"\n    var pathname;\n    if (parentIsPlain) {\n      // resolving to a plain parent -> skip standard URL prefix, and treat entire parent as pathname\n      if (parentUrl === undefined)\n        throwResolveError(relUrl, parentUrl);\n      pathname = parentUrl;\n    }\n    else if (parentUrl[parentProtocol.length + 1] === '/') {\n      // resolving to a :// so we need to read out the auth and host\n      if (parentProtocol !== 'file:') {\n        pathname = parentUrl.substr(parentProtocol.length + 2);\n        pathname = pathname.substr(pathname.indexOf('/') + 1);\n      }\n      else {\n        pathname = parentUrl.substr(8);\n      }\n    }\n    else {\n      // resolving to :/ so pathname is the /... part\n      pathname = parentUrl.substr(parentProtocol.length + 1);\n    }\n\n    if (firstChar === '/') {\n      if (parentIsPlain)\n        throwResolveError(relUrl, parentUrl);\n      else\n        return parentUrl.substr(0, parentUrl.length - pathname.length - 1) + relUrl;\n    }\n\n    // join together and split for removal of .. and . segments\n    // looping the string instead of anything fancy for perf reasons\n    // '../../../../../z' resolved to 'x/y' is just 'z' regardless of parentIsPlain\n    var segmented = pathname.substr(0, pathname.lastIndexOf('/') + 1) + relUrl;\n\n    var output = [];\n    var segmentIndex = undefined;\n\n    for (var i = 0; i < segmented.length; i++) {\n      // busy reading a segment - only terminate on '/'\n      if (segmentIndex !== undefined) {\n        if (segmented[i] === '/') {\n          output.push(segmented.substr(segmentIndex, i - segmentIndex + 1));\n          segmentIndex = undefined;\n        }\n        continue;\n      }\n\n      // new segment - check if it is relative\n      if (segmented[i] === '.') {\n        // ../ segment\n        if (segmented[i + 1] === '.' && (segmented[i + 2] === '/' || i === segmented.length - 2)) {\n          output.pop();\n          i += 2;\n        }\n        // ./ segment\n        else if (segmented[i + 1] === '/' || i === segmented.length - 1) {\n          i += 1;\n        }\n        else {\n          // the start of a new segment as below\n          segmentIndex = i;\n          continue;\n        }\n\n        // this is the plain URI backtracking error (../, package:x -> error)\n        if (parentIsPlain && output.length === 0)\n          throwResolveError(relUrl, parentUrl);\n\n        // trailing . or .. segment\n        if (i === segmented.length)\n          output.push('');\n        continue;\n      }\n\n      // it is the start of a new segment\n      segmentIndex = i;\n    }\n    // finish reading out the last segment\n    if (segmentIndex !== undefined)\n      output.push(segmented.substr(segmentIndex, segmented.length - segmentIndex));\n\n    return parentUrl.substr(0, parentUrl.length - pathname.length) + output.join('');\n  }\n\n  // sanitizes and verifies (by returning undefined if not a valid URL-like form)\n  // Windows filepath compatibility is an added convenience here\n  var protocolIndex = relUrl.indexOf(':');\n  if (protocolIndex !== -1) {\n    if (isNode) {\n      // C:\\x becomes file:///c:/x (we don't support C|\\x)\n      if (relUrl[1] === ':' && relUrl[2] === '\\\\' && relUrl[0].match(/[a-z]/i))\n        return 'file:///' + relUrl.replace(/\\\\/g, '/');\n    }\n    return relUrl;\n  }\n}\n","import { Loader, ModuleNamespace } from './loader-polyfill.js';\nimport { resolveIfNotPlain } from './resolve.js';\nimport { addToError, global, createSymbol, baseURI } from './common.js';\n\nexport default RegisterLoader;\n\n/*\n * Register Loader\n *\n * Builds directly on top of loader polyfill to provide:\n * - loader.register support\n * - hookable higher-level resolve\n * - instantiate hook returning a ModuleNamespace or undefined for es module loading\n * - loader error behaviour as in HTML and loader specs, clearing failed modules from registration cache synchronously\n * - build tracing support by providing a .trace=true and .loads object format\n */\n\nvar REGISTER_INTERNAL = createSymbol('register-internal');\n\nfunction RegisterLoader () {\n  Loader.call(this);\n\n  this[REGISTER_INTERNAL] = {\n    // last anonymous System.register call\n    lastRegister: undefined,\n    // in-flight es module load records\n    records: {}\n  }\n\n  // tracing\n  this.trace = false;\n}\n\nRegisterLoader.prototype = Object.create(Loader.prototype);\nRegisterLoader.prototype.constructor = RegisterLoader;\n\nvar INSTANTIATE = RegisterLoader.instantiate = createSymbol('instantiate');\n\n// default normalize is the WhatWG style normalizer\nRegisterLoader.prototype[RegisterLoader.resolve = Loader.resolve] = function (key, parentKey) {\n  return resolveIfNotPlain(key, parentKey || baseURI);\n};\n\nRegisterLoader.prototype[INSTANTIATE] = function (key, processAnonRegister) {};\n\n// once evaluated, the linkRecord is set to undefined leaving just the other load record properties\n// this allows tracking new binding listeners for es modules through importerSetters\n// for dynamic modules, the load record is removed entirely.\nfunction createLoadRecord (state, key, registration) {\n  return state.records[key] = {\n    key: key,\n\n    // defined System.register cache\n    registration: registration,\n\n    // module namespace object\n    module: undefined,\n\n    // es-only\n    // this sticks around so new module loads can listen to binding changes\n    // for already-loaded modules by adding themselves to their importerSetters\n    importerSetters: undefined,\n\n    // in-flight linking record\n    linkRecord: {\n      // promise for instantiated\n      instantiatePromise: undefined,\n      dependencies: undefined,\n      execute: undefined,\n      executingRequire: false,\n\n      // underlying module object bindings\n      moduleObj: undefined,\n\n      // es only, also indicates if es or not\n      setters: undefined,\n\n      // promise for instantiated dependencies (dependencyInstantiations populated)\n      depsInstantiatePromise: undefined,\n      // will be the array of dependency load record or a module namespace\n      dependencyInstantiations: undefined,\n\n      // indicates if the load and all its dependencies are instantiated and linked\n      // but not yet executed\n      // mostly just a performance shortpath to avoid rechecking the promises above\n      linked: false,\n\n      error: undefined\n      // NB optimization and way of ensuring module objects in setters\n      // indicates setters which should run pre-execution of that dependency\n      // setters is then just for completely executed module objects\n      // alternatively we just pass the partially filled module objects as\n      // arguments into the execute function\n      // hoisted: undefined\n    }\n  };\n}\n\nRegisterLoader.prototype[Loader.resolveInstantiate] = function (key, parentKey) {\n  var loader = this;\n  var state = this[REGISTER_INTERNAL];\n  var registry = loader.registry[loader.registry._registry];\n\n  return resolveInstantiate(loader, key, parentKey, registry, state)\n  .then(function (instantiated) {\n    if (instantiated instanceof ModuleNamespace)\n      return instantiated;\n\n    // if already beaten to linked, return\n    if (instantiated.module)\n      return instantiated.module;\n\n    // resolveInstantiate always returns a load record with a link record and no module value\n    if (instantiated.linkRecord.linked)\n      return ensureEvaluate(loader, instantiated, instantiated.linkRecord, registry, state, undefined);\n\n    return instantiateDeps(loader, instantiated, instantiated.linkRecord, registry, state, [instantiated])\n    .then(function () {\n      return ensureEvaluate(loader, instantiated, instantiated.linkRecord, registry, state, undefined);\n    })\n    .catch(function (err) {\n      clearLoadErrors(loader, instantiated);\n      throw err;\n    });\n  });\n};\n\nfunction resolveInstantiate (loader, key, parentKey, registry, state) {\n  // normalization shortpath for already-normalized key\n  // could add a plain name filter, but doesn't yet seem necessary for perf\n  var module = registry[key];\n  if (module)\n    return Promise.resolve(module);\n\n  var load = state.records[key];\n\n  // already linked but not in main registry is ignored\n  if (load && !load.module)\n    return instantiate(loader, load, load.linkRecord, registry, state);\n\n  return loader.resolve(key, parentKey)\n  .then(function (resolvedKey) {\n    // main loader registry always takes preference\n    module = registry[resolvedKey];\n    if (module)\n      return module;\n\n    load = state.records[resolvedKey];\n\n    // already has a module value but not already in the registry (load.module)\n    // means it was removed by registry.delete, so we should\n    // disgard the current load record creating a new one over it\n    // but keep any existing registration\n    if (!load || load.module)\n      load = createLoadRecord(state, resolvedKey, load && load.registration);\n\n    var link = load.linkRecord;\n    if (!link)\n      return load;\n\n    return instantiate(loader, load, link, registry, state);\n  });\n}\n\nfunction createProcessAnonRegister (loader, load, state) {\n  return function () {\n    var lastRegister = state.lastRegister;\n\n    if (!lastRegister)\n      return !!load.registration;\n\n    state.lastRegister = undefined;\n    load.registration = lastRegister;\n\n    return true;\n  };\n}\n\nfunction instantiate (loader, load, link, registry, state) {\n  return link.instantiatePromise || (link.instantiatePromise =\n  // if there is already an existing registration, skip running instantiate\n  (load.registration ? Promise.resolve() : Promise.resolve().then(function () {\n    state.lastRegister = undefined;\n    return loader[INSTANTIATE](load.key, loader[INSTANTIATE].length > 1 && createProcessAnonRegister(loader, load, state));\n  }))\n  .then(function (instantiation) {\n    // direct module return from instantiate -> we're done\n    if (instantiation !== undefined) {\n      if (!(instantiation instanceof ModuleNamespace))\n        throw new TypeError('Instantiate did not return a valid Module object.');\n\n      delete state.records[load.key];\n      if (loader.trace)\n        traceLoad(loader, load, link);\n      return registry[load.key] = instantiation;\n    }\n\n    // run the cached loader.register declaration if there is one\n    var registration = load.registration;\n    // clear to allow new registrations for future loads (combined with registry delete)\n    load.registration = undefined;\n    if (!registration)\n      throw new TypeError('Module instantiation did not call an anonymous or correctly named System.register.');\n\n    link.dependencies = registration[0];\n\n    load.importerSetters = [];\n\n    link.moduleObj = {};\n\n    // process System.registerDynamic declaration\n    if (registration[2]) {\n      link.moduleObj.default = {};\n      link.moduleObj.__useDefault = true;\n      link.executingRequire = registration[1];\n      link.execute = registration[2];\n    }\n\n    // process System.register declaration\n    else {\n      registerDeclarative(loader, load, link, registration[1]);\n    }\n\n    // shortpath to instantiateDeps\n    if (!link.dependencies.length) {\n      link.linked = true;\n      if (loader.trace)\n        traceLoad(loader, load, link);\n    }\n\n    return load;\n  })\n  .catch(function (err) {\n    throw link.error = addToError(err, 'Instantiating ' + load.key);\n  }));\n}\n\n// like resolveInstantiate, but returning load records for linking\nfunction resolveInstantiateDep (loader, key, parentKey, registry, state, traceDepMap) {\n  // normalization shortpaths for already-normalized key\n  // DISABLED to prioritise consistent resolver calls\n  // could add a plain name filter, but doesn't yet seem necessary for perf\n  /* var load = state.records[key];\n  var module = registry[key];\n\n  if (module) {\n    if (traceDepMap)\n      traceDepMap[key] = key;\n\n    // registry authority check in case module was deleted or replaced in main registry\n    if (load && load.module && load.module === module)\n      return load;\n    else\n      return module;\n  }\n\n  // already linked but not in main registry is ignored\n  if (load && !load.module) {\n    if (traceDepMap)\n      traceDepMap[key] = key;\n    return instantiate(loader, load, load.linkRecord, registry, state);\n  } */\n  return loader.resolve(key, parentKey)\n  .then(function (resolvedKey) {\n    if (traceDepMap)\n      traceDepMap[key] = key;\n\n    // normalization shortpaths for already-normalized key\n    var load = state.records[resolvedKey];\n    var module = registry[resolvedKey];\n\n    // main loader registry always takes preference\n    if (module && (!load || load.module && module !== load.module))\n      return module;\n\n    // already has a module value but not already in the registry (load.module)\n    // means it was removed by registry.delete, so we should\n    // disgard the current load record creating a new one over it\n    // but keep any existing registration\n    if (!load || !module && load.module)\n      load = createLoadRecord(state, resolvedKey, load && load.registration);\n\n    var link = load.linkRecord;\n    if (!link)\n      return load;\n\n    return instantiate(loader, load, link, registry, state);\n  });\n}\n\nfunction traceLoad (loader, load, link) {\n  loader.loads = loader.loads || {};\n  loader.loads[load.key] = {\n    key: load.key,\n    deps: link.dependencies,\n    depMap: link.depMap || {}\n  };\n}\n\n/*\n * Convert a CJS module.exports into a valid object for new Module:\n *\n *   new Module(getEsModule(module.exports))\n *\n * Sets the default value to the module, while also reading off named exports carefully.\n */\nfunction registerDeclarative (loader, load, link, declare) {\n  var moduleObj = link.moduleObj;\n  var importerSetters = load.importerSetters;\n\n  var locked = false;\n\n  // closure especially not based on link to allow link record disposal\n  var declared = declare.call(global, function (name, value) {\n    // export setter propogation with locking to avoid cycles\n    if (locked)\n      return;\n\n    if (typeof name === 'object') {\n      for (var p in name)\n        if (p !== '__useDefault')\n          moduleObj[p] = name[p];\n    }\n    else {\n      moduleObj[name] = value;\n    }\n\n    locked = true;\n    for (var i = 0; i < importerSetters.length; i++)\n      importerSetters[i](moduleObj);\n    locked = false;\n\n    return value;\n  }, new ContextualLoader(loader, load.key));\n\n  link.setters = declared.setters;\n  link.execute = declared.execute;\n  if (declared.exports)\n    link.moduleObj = moduleObj = declared.exports;\n}\n\nfunction instantiateDeps (loader, load, link, registry, state, seen) {\n  return (link.depsInstantiatePromise || (link.depsInstantiatePromise = Promise.resolve()\n  .then(function () {\n    var depsInstantiatePromises = Array(link.dependencies.length);\n\n    for (var i = 0; i < link.dependencies.length; i++)\n      depsInstantiatePromises[i] = resolveInstantiateDep(loader, link.dependencies[i], load.key, registry, state, loader.trace && (link.depMap = {}));\n\n    return Promise.all(depsInstantiatePromises);\n  })\n  .then(function (dependencyInstantiations) {\n    link.dependencyInstantiations = dependencyInstantiations;\n\n    // run setters to set up bindings to instantiated dependencies\n    if (link.setters) {\n      for (var i = 0; i < dependencyInstantiations.length; i++) {\n        var setter = link.setters[i];\n        if (setter) {\n          var instantiation = dependencyInstantiations[i];\n\n          if (instantiation instanceof ModuleNamespace) {\n            setter(instantiation);\n          }\n          else {\n            setter(instantiation.module || instantiation.linkRecord.moduleObj);\n            // this applies to both es and dynamic registrations\n            if (instantiation.importerSetters)\n              instantiation.importerSetters.push(setter);\n          }\n        }\n      }\n    }\n  })))\n  .then(function () {\n    // now deeply instantiateDeps on each dependencyInstantiation that is a load record\n    var deepDepsInstantiatePromises = [];\n\n    for (var i = 0; i < link.dependencies.length; i++) {\n      var depLoad = link.dependencyInstantiations[i];\n      var depLink = depLoad.linkRecord;\n\n      if (!depLink || depLink.linked)\n        continue;\n\n      if (seen.indexOf(depLoad) !== -1)\n        continue;\n      seen.push(depLoad);\n\n      deepDepsInstantiatePromises.push(instantiateDeps(loader, depLoad, depLoad.linkRecord, registry, state, seen));\n    }\n\n    return Promise.all(deepDepsInstantiatePromises);\n  })\n  .then(function () {\n    // as soon as all dependencies instantiated, we are ready for evaluation so can add to the registry\n    // this can run multiple times, but so what\n    link.linked = true;\n    if (loader.trace)\n      traceLoad(loader, load, link);\n\n    return load;\n  })\n  .catch(function (err) {\n    err = addToError(err, 'Loading ' + load.key);\n\n    // throw up the instantiateDeps stack\n    // loads are then synchonously cleared at the top-level through the clearLoadErrors helper below\n    // this then ensures avoiding partially unloaded tree states\n    link.error = link.error || err;\n\n    throw err;\n  });\n}\n\n// clears an errored load and all its errored dependencies from the loads registry\nfunction clearLoadErrors (loader, load) {\n  var state = loader[REGISTER_INTERNAL];\n\n  // clear from loads\n  if (state.records[load.key] === load)\n    delete state.records[load.key];\n\n  var link = load.linkRecord;\n\n  if (!link)\n    return;\n\n  if (link.dependencyInstantiations)\n    link.dependencyInstantiations.forEach(function (depLoad, index) {\n      if (!depLoad || depLoad instanceof ModuleNamespace)\n        return;\n\n      if (depLoad.linkRecord) {\n        if (depLoad.linkRecord.error) {\n          // provides a circular reference check\n          if (state.records[depLoad.key] === depLoad)\n            clearLoadErrors(loader, depLoad);\n        }\n\n        // unregister setters for es dependency load records that will remain\n        if (link.setters && depLoad.importerSetters) {\n          var setterIndex = depLoad.importerSetters.indexOf(link.setters[index]);\n          depLoad.importerSetters.splice(setterIndex, 1);\n        }\n      }\n    });\n}\n\n/*\n * System.register\n */\nRegisterLoader.prototype.register = function (key, deps, declare) {\n  var state = this[REGISTER_INTERNAL];\n\n  // anonymous modules get stored as lastAnon\n  if (declare === undefined) {\n    state.lastRegister = [key, deps, undefined];\n  }\n\n  // everything else registers into the register cache\n  else {\n    var load = state.records[key] || createLoadRecord(state, key, undefined);\n    load.registration = [deps, declare, undefined];\n  }\n};\n\n/*\n * System.registerDyanmic\n */\nRegisterLoader.prototype.registerDynamic = function (key, deps, executingRequire, execute) {\n  var state = this[REGISTER_INTERNAL];\n\n  // anonymous modules get stored as lastAnon\n  if (typeof key !== 'string') {\n    state.lastRegister = [key, deps, executingRequire];\n  }\n\n  // everything else registers into the register cache\n  else {\n    var load = state.records[key] || createLoadRecord(state, key, undefined);\n    load.registration = [deps, executingRequire, execute];\n  }\n};\n\n// ContextualLoader class\n// backwards-compatible with previous System.register context argument by exposing .id\nfunction ContextualLoader (loader, key) {\n  this.loader = loader;\n  this.key = this.id = key;\n}\nContextualLoader.prototype.constructor = function () {\n  throw new TypeError('Cannot subclass the contextual loader only Reflect.Loader.');\n};\nContextualLoader.prototype.import = function (key) {\n  return this.loader.import(key, this.key);\n};\nContextualLoader.prototype.resolve = function (key) {\n  return this.loader.resolve(key, this.key);\n};\nContextualLoader.prototype.load = function (key) {\n  return this.loader.load(key, this.key);\n};\n\n// this is the execution function bound to the Module namespace record\nfunction ensureEvaluate (loader, load, link, registry, state, seen) {\n  if (load.module)\n    return load.module;\n\n  if (link.error)\n    throw link.error;\n\n  if (seen && seen.indexOf(load) !== -1)\n    return load.linkRecord.moduleObj;\n\n  // for ES loads we always run ensureEvaluate on top-level, so empty seen is passed regardless\n  // for dynamic loads, we pass seen if also dynamic\n  var err = doEvaluate(loader, load, link, registry, state, link.setters ? [] : seen || []);\n  if (err) {\n    clearLoadErrors(loader, load);\n    throw err;\n  }\n\n  return load.module;\n}\n\nfunction makeDynamicRequire (loader, key, dependencies, dependencyInstantiations, registry, state, seen) {\n  // we can only require from already-known dependencies\n  return function (name) {\n    for (var i = 0; i < dependencies.length; i++) {\n      if (dependencies[i] === name) {\n        var depLoad = dependencyInstantiations[i];\n        var module;\n\n        if (depLoad instanceof ModuleNamespace)\n          module = depLoad;\n        else\n          module = ensureEvaluate(loader, depLoad, depLoad.linkRecord, registry, state, seen);\n\n        return module.__useDefault ? module.default : module;\n      }\n    }\n    throw new Error('Module ' + name + ' not declared as a System.registerDynamic dependency of ' + key);\n  };\n}\n\n// ensures the given es load is evaluated\n// returns the error if any\nfunction doEvaluate (loader, load, link, registry, state, seen) {\n  seen.push(load);\n\n  var err;\n\n  // es modules evaluate dependencies first\n  // non es modules explicitly call moduleEvaluate through require\n  if (link.setters) {\n    var depLoad, depLink;\n    for (var i = 0; i < link.dependencies.length; i++) {\n      depLoad = link.dependencyInstantiations[i];\n\n      if (depLoad instanceof ModuleNamespace)\n        continue;\n\n      // custom Module returned from instantiate\n      depLink = depLoad.linkRecord;\n      if (depLink && seen.indexOf(depLoad) === -1) {\n        if (depLink.error)\n          err = depLink.error;\n        else\n          // dynamic / declarative boundaries clear the \"seen\" list\n          // we just let cross format circular throw as would happen in real implementations\n          err = doEvaluate(loader, depLoad, depLink, registry, state, depLink.setters ? seen : []);\n      }\n\n      if (err)\n        return link.error = addToError(err, 'Evaluating ' + load.key);\n    }\n  }\n\n  // link.execute won't exist for Module returns from instantiate on top-level load\n  if (link.execute) {\n    // ES System.register execute\n    // \"this\" is null in ES\n    if (link.setters) {\n      err = declarativeExecute(link.execute);\n    }\n    // System.registerDynamic execute\n    // \"this\" is \"exports\" in CJS\n    else {\n      var module = { id: load.key };\n      var moduleObj = link.moduleObj;\n      Object.defineProperty(module, 'exports', {\n        configurable: true,\n        set: function (exports) {\n          moduleObj.default = exports;\n        },\n        get: function () {\n          return moduleObj.default;\n        }\n      });\n\n      var require = makeDynamicRequire(loader, load.key, link.dependencies, link.dependencyInstantiations, registry, state, seen);\n\n      // evaluate deps first\n      if (!link.executingRequire)\n        for (var i = 0; i < link.dependencies.length; i++)\n          require(link.dependencies[i]);\n\n      err = dynamicExecute(link.execute, require, moduleObj.default, module);\n\n      // pick up defineProperty calls to module.exports when we can\n      if (module.exports !== moduleObj.default)\n        moduleObj.default = module.exports;\n\n      // __esModule flag extension support\n      if (moduleObj.default && moduleObj.default.__esModule)\n        for (var p in moduleObj.default)\n          if (Object.hasOwnProperty.call(moduleObj.default, p) && p !== 'default')\n            moduleObj[p] = moduleObj.default[p];\n    }\n  }\n\n  if (err)\n    return link.error = addToError(err, 'Evaluating ' + load.key);\n\n  registry[load.key] = load.module = new ModuleNamespace(link.moduleObj);\n\n  // if not an esm module, run importer setters and clear them\n  // this allows dynamic modules to update themselves into es modules\n  // as soon as execution has completed\n  if (!link.setters) {\n    if (load.importerSetters)\n      for (var i = 0; i < load.importerSetters.length; i++)\n        load.importerSetters[i](load.module);\n    load.importerSetters = undefined;\n  }\n\n  // dispose link record\n  load.linkRecord = undefined;\n}\n\n// {} is the closest we can get to call(undefined)\nvar nullContext = {};\nif (Object.freeze)\n  Object.freeze(nullContext);\n\nfunction declarativeExecute (execute) {\n  try {\n    execute.call(nullContext);\n  }\n  catch (e) {\n    return e;\n  }\n}\n\nfunction dynamicExecute (execute, require, exports, module) {\n  try {\n    var output = execute.call(global, require, exports, module);\n    if (output !== undefined)\n      module.exports = output;\n  }\n  catch (e) {\n    return e;\n  }\n}\n","// https://github.com/ModuleLoader/es-module-loader\n\nimport RegisterLoader from \"es-module-loader/core/register-loader.js\"\nimport { baseURI } from \"es-module-loader/core/common.js\"\nimport { resolveIfNotPlain } from \"es-module-loader/core/resolve.js\"\n\nexport const createLoader = ({\n\tbase,\n\tresolve = RegisterLoader.prototype[RegisterLoader.resolve],\n\tinstantiate = RegisterLoader.prototype[RegisterLoader.instantiate],\n} = {}) => {\n\tconst loader = new RegisterLoader()\n\n\tif (base) {\n\t\tbase = resolveIfNotPlain(base, baseURI) || resolveIfNotPlain(`./${base}`, baseURI)\n\t} else {\n\t\tbase = baseURI\n\t}\n\n\tif (base[base.length - 1] !== \"/\") {\n\t\tbase += \"/\"\n\t}\n\n\tloader[RegisterLoader.resolve] = function(key, parent = base) {\n\t\treturn resolve.call(this, key, parent) || key\n\t}\n\n\tloader[RegisterLoader.instantiate] = instantiate\n\n\treturn loader\n}\n","// https://github.com/ModuleLoader/browser-es-module-loader\n\nimport { createLoader } from \"../createLoader.js\"\n\nexport const createBrowserLoader = ({ base } = {}) => {\n\treturn createLoader({ base })\n}\n"],"names":["isBrowser","window","document","isNode","process","versions","node","isWindows","platform","match","envGlobal","self","global","hasSymbol","Symbol","createSymbol","name","baseURI","getElementsByTagName","bases","href","location","split","substr","lastIndexOf","cwd","replace","TypeError","length","errArgs","Error","fileName","LoaderError__Check_error_message_for_loader_stack","childErr","newMessage","message","err","lineNumber","stack","originalErr","resolvedPromise","Promise","resolve","arrayValues","arr","values","iterator","iterable","keys","Object","keyIndex","undefined","Loader","registry","Registry","prototype","constructor","ensureInstantiated","module","ModuleNamespace","key","parent","loader","then","RESOLVE_INSTANTIATE","addToError","RESOLVE","resolveInstantiate","resolved","get","ensureResolution","resolvedKey","RangeError","iteratorSupport","REGISTRY","_registry","entries","map","set","namespace","has","hasOwnProperty","call","BASE_OBJECT","baseObject","defineProperty","forEach","extendNamespace","create","toStringTag","throwResolveError","relUrl","parentUrl","resolveIfNotPlain","parentProtocol","indexOf","firstChar","secondChar","parentIsPlain","pathname","segmented","output","segmentIndex","i","push","pop","join","protocolIndex","REGISTER_INTERNAL","RegisterLoader","trace","INSTANTIATE","instantiate","parentKey","processAnonRegister","createLoadRecord","state","registration","records","instantiated","linkRecord","linked","ensureEvaluate","instantiateDeps","load","link","createProcessAnonRegister","lastRegister","instantiatePromise","instantiation","traceLoad","dependencies","importerSetters","moduleObj","__useDefault","executingRequire","execute","error","resolveInstantiateDep","traceDepMap","loads","depMap","registerDeclarative","declare","locked","declared","value","p","ContextualLoader","setters","exports","seen","depsInstantiatePromise","depsInstantiatePromises","Array","all","dependencyInstantiations","setter","deepDepsInstantiatePromises","depLoad","depLink","clearLoadErrors","index","setterIndex","splice","register","deps","registerDynamic","id","doEvaluate","makeDynamicRequire","declarativeExecute","require","dynamicExecute","__esModule","nullContext","freeze","e","createLoader","base","createBrowserLoader"],"mappings":";;;AAGO,IAAIA,YAAY,OAAOC,MAAP,KAAkB,WAAlB,IAAiC,OAAOC,QAAP,KAAoB,WAArE;AACP,AAAO,IAAIC,SAAS,OAAOC,OAAP,KAAmB,WAAnB,IAAkCA,QAAQC,QAA1C,IAAsDD,QAAQC,QAAR,CAAiBC,IAApF;AACP,AAAO,IAAIC,YAAY,OAAOH,OAAP,KAAmB,WAAnB,IAAkC,OAAOA,QAAQI,QAAf,KAA4B,QAA9D,IAA0EJ,QAAQI,QAAR,CAAiBC,KAAjB,CAAuB,MAAvB,CAA1F;;AAEP,IAAIC,YAAY,OAAOC,IAAP,KAAgB,WAAhB,GAA8BA,IAA9B,GAAqCC,MAArD;AACA;AAKA,IAAIC,YAAY,OAAOC,MAAP,KAAkB,WAAlC;AACA,AAAO,SAASC,YAAT,CAAuBC,IAAvB,EAA6B;SAC3BH,YAAYC,QAAZ,GAAuB,OAAOE,IAArC;;;AAmBF,AAAO,IAAIC,OAAJ;;AAGP,IAAI,OAAOf,QAAP,IAAmB,WAAnB,IAAkCA,SAASgB,oBAA/C,EAAqE;YACzDhB,SAASe,OAAnB;;MAEI,CAACA,OAAL,EAAc;QACRE,QAAQjB,SAASgB,oBAAT,CAA8B,MAA9B,CAAZ;cACUC,MAAM,CAAN,KAAYA,MAAM,CAAN,EAASC,IAArB,IAA6BnB,OAAOoB,QAAP,CAAgBD,IAAvD;;CALJ,MAQK,IAAI,OAAOC,QAAP,IAAmB,WAAvB,EAAoC;YAC7BA,SAASD,IAAnB;;;AAIF,IAAIH,OAAJ,EAAa;YACDA,QAAQK,KAAR,CAAc,GAAd,EAAmB,CAAnB,EAAsBA,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CAAV;YACUL,QAAQM,MAAR,CAAe,CAAf,EAAkBN,QAAQO,WAAR,CAAoB,GAApB,IAA2B,CAA7C,CAAV;CAFF,MAIK,IAAI,OAAOpB,OAAP,IAAkB,WAAlB,IAAiCA,QAAQqB,GAA7C,EAAkD;YAC3C,aAAalB,YAAY,GAAZ,GAAkB,EAA/B,IAAqCH,QAAQqB,GAAR,EAA/C;MACIlB,SAAJ,EACEU,UAAUA,QAAQS,OAAR,CAAgB,KAAhB,EAAuB,GAAvB,CAAV;CAHC,MAKA;QACG,IAAIC,SAAJ,CAAc,wBAAd,CAAN;;;AAIF,IAAIV,QAAQA,QAAQW,MAAR,GAAiB,CAAzB,MAAgC,GAApC,EACEX,WAAW,GAAX;;AAKF,IAAIY,UAAU,IAAIC,KAAJ,CAAU,CAAV,EAAa,GAAb,EAAkBC,QAAlB,IAA8B,GAA5C;AACA,SAASC,iDAAT,CAA4DC,QAA5D,EAAsEC,UAAtE,EAAkF;MAE5E,CAAClC,SAAL,EACEkC,aAAaA,WAAWR,OAAX,CAAmBnB,YAAY,cAAZ,GAA6B,YAAhD,EAA8D,EAA9D,CAAb;;MAEE4B,UAAU,CAACF,SAASE,OAAT,IAAoBF,QAArB,IAAiC,MAAjC,GAA0CC,UAAxD;;MAEIE,GAAJ;MACIP,WAAWI,SAASF,QAAxB,EACEK,MAAM,IAAIN,KAAJ,CAAUK,OAAV,EAAmBF,SAASF,QAA5B,EAAsCE,SAASI,UAA/C,CAAN,CADF,KAGED,MAAM,IAAIN,KAAJ,CAAUK,OAAV,CAAN;;MAGEG,QAAQL,SAASM,WAAT,GAAuBN,SAASM,WAAT,CAAqBD,KAA5C,GAAoDL,SAASK,KAAzE;;MAEInC,MAAJ,EAEEiC,IAAIE,KAAJ,GAAYH,UAAU,MAAV,GAAmBG,KAA/B,CAFF,KAIEF,IAAIE,KAAJ,GAAYA,KAAZ;;MAEEC,WAAJ,GAAkBN,SAASM,WAAT,IAAwBN,QAA1C;;SAEOG,GAAP;;;AC3FF,IAAII,kBAAkBC,QAAQC,OAAR,EAAtB;;AAKA,SAASC,WAAT,CAAsBC,GAAtB,EAA2B;MACrBA,IAAIC,MAAR,EACE,OAAOD,IAAIC,MAAJ,EAAP;;MAEE,OAAO/B,MAAP,KAAkB,WAAlB,IAAiC,CAACA,OAAOgC,QAA7C,EACE,MAAM,IAAIhB,KAAJ,CAAU,+CAAV,CAAN;;MAEEiB,WAAW,EAAf;WACSjC,OAAOgC,QAAhB,IAA4B,YAAY;QAClCE,OAAOC,OAAOD,IAAP,CAAYJ,GAAZ,CAAX;QACIM,WAAW,CAAf;WACO;YACC,gBAAY;YACZA,WAAWF,KAAKpB,MAApB,EACE,OAAO;iBACEgB,IAAII,KAAKE,UAAL,CAAJ,CADF;gBAEC;SAFR,CADF,KAME,OAAO;iBACEC,SADF;gBAEC;SAFR;;KARN;GAHF;SAkBOJ,QAAP;;;AASF,SAASK,MAAT,GAAmB;OACZC,QAAL,GAAgB,IAAIC,QAAJ,EAAhB;;;AAGFF,OAAOG,SAAP,CAAiBC,WAAjB,GAA+BJ,MAA/B;;AAEA,SAASK,kBAAT,CAA6BC,MAA7B,EAAqC;MAC/B,EAAEA,kBAAkBC,eAApB,CAAJ,EACE,MAAM,IAAIhC,SAAJ,CAAc,+DAAd,CAAN;SACK+B,MAAP;;;AAIFN,OAAOG,SAAP,aAA0B,UAAUK,GAAV,EAAeC,MAAf,EAAuB;MAC3C,OAAOD,GAAP,KAAe,QAAnB,EACE,MAAM,IAAIjC,SAAJ,CAAc,yDAAd,CAAN;;MAEEmC,SAAS,IAAb;SACOtB,gBACNuB,IADM,CACD,YAAY;WACTD,OAAOE,mBAAP,EAA4BJ,GAA5B,EAAiCC,MAAjC,CAAP;GAFK,EAINE,IAJM,CAIDN,kBAJC,WAMA,UAAUrB,GAAV,EAAe;UACd6B,kDAAW7B,GAAX,EAAgB,aAAawB,GAAb,IAAoBC,SAAS,WAAWA,MAApB,GAA6B,EAAjD,CAAhB,CAAN;GAPK,CAAP;CALF;;AAgBA,IAAIK,UAAUd,OAAOV,OAAP,GAAiB3B,aAAa,SAAb,CAA/B;;AAWA,IAAIiD,sBAAsBZ,OAAOe,kBAAP,GAA4BpD,aAAa,oBAAb,CAAtD;;AAIAqC,OAAOG,SAAP,CAAiBS,mBAAjB,IAAwC,UAAUJ,GAAV,EAAeC,MAAf,EAAuB;MACzDC,SAAS,IAAb;SACOA,OAAOpB,OAAP,CAAekB,GAAf,EAAoBC,MAApB,EACNE,IADM,CACD,UAAUK,QAAV,EAAoB;WACjBN,OAAOT,QAAP,CAAgBgB,GAAhB,CAAoBD,QAApB,CAAP;GAFK,CAAP;CAFF;;AAQA,SAASE,gBAAT,CAA2BC,WAA3B,EAAwC;MAClCA,gBAAgBpB,SAApB,EACE,MAAM,IAAIqB,UAAJ,CAAe,sBAAf,CAAN;SACKD,WAAP;;;AAGFnB,OAAOG,SAAP,CAAiBb,OAAjB,GAA2B,UAAUkB,GAAV,EAAeC,MAAf,EAAuB;MAC5CC,SAAS,IAAb;SACOtB,gBACNuB,IADM,CACD,YAAW;WACRD,OAAOI,OAAP,EAAgBN,GAAhB,EAAqBC,MAArB,CAAP;GAFK,EAINE,IAJM,CAIDO,gBAJC,WAKA,UAAUlC,GAAV,EAAe;UACd6B,kDAAW7B,GAAX,EAAgB,eAAewB,GAAf,IAAsBC,SAAS,SAASA,MAAlB,GAA2B,EAAjD,CAAhB,CAAN;GANK,CAAP;CAFF;;AAgCA,IAAIY,kBAAkB,OAAO3D,MAAP,KAAkB,WAAlB,IAAiCA,OAAOgC,QAA9D;AACA,IAAI4B,WAAW3D,aAAa,UAAb,CAAf;AACA,SAASuC,QAAT,GAAoB;OACboB,QAAL,IAAiB,EAAjB;OACKC,SAAL,GAAiBD,QAAjB;;;AAGF,IAAID,eAAJ,EAAqB;WAEVlB,SAAT,CAAmBzC,OAAOgC,QAA1B,IAAsC,YAAY;WACzC,KAAK8B,OAAL,GAAe9D,OAAOgC,QAAtB,GAAP;GADF;;WAKSS,SAAT,CAAmBqB,OAAnB,GAA6B,YAAY;QACnCvB,WAAW,KAAKqB,QAAL,CAAf;WACO/B,YAAYM,OAAOD,IAAP,CAAYK,QAAZ,EAAsBwB,GAAtB,CAA0B,UAAUjB,GAAV,EAAe;aACnD,CAACA,GAAD,EAAMP,SAASO,GAAT,CAAN,CAAP;KADiB,CAAZ,CAAP;GAFF;;;AASFN,SAASC,SAAT,CAAmBP,IAAnB,GAA0B,YAAY;SAC7BL,YAAYM,OAAOD,IAAP,CAAY,KAAK0B,QAAL,CAAZ,CAAZ,CAAP;CADF;;AAIApB,SAASC,SAAT,CAAmBV,MAAnB,GAA4B,YAAY;MAClCQ,WAAW,KAAKqB,QAAL,CAAf;SACO/B,YAAYM,OAAOD,IAAP,CAAYK,QAAZ,EAAsBwB,GAAtB,CAA0B,UAAUjB,GAAV,EAAe;WACnDP,SAASO,GAAT,CAAP;GADiB,CAAZ,CAAP;CAFF;;AAOAN,SAASC,SAAT,CAAmBc,GAAnB,GAAyB,UAAUT,GAAV,EAAe;SAC/B,KAAKc,QAAL,EAAed,GAAf,CAAP;CADF;;AAIAN,SAASC,SAAT,CAAmBuB,GAAnB,GAAyB,UAAUlB,GAAV,EAAemB,SAAf,EAA0B;MAC7C,EAAEA,qBAAqBpB,eAAvB,CAAJ,EACE,MAAM,IAAI7B,KAAJ,CAAU,2DAAV,CAAN;OACG4C,QAAL,EAAed,GAAf,IAAsBmB,SAAtB;SACO,IAAP;CAJF;;AAOAzB,SAASC,SAAT,CAAmByB,GAAnB,GAAyB,UAAUpB,GAAV,EAAe;SAC/BX,OAAOgC,cAAP,CAAsBC,IAAtB,CAA2B,KAAKR,QAAL,CAA3B,EAA2Cd,GAA3C,CAAP;CADF;;AAIAN,SAASC,SAAT,aAA4B,UAAUK,GAAV,EAAe;MACrCX,OAAOgC,cAAP,CAAsBC,IAAtB,CAA2B,KAAKR,QAAL,CAA3B,EAA2Cd,GAA3C,CAAJ,EAAqD;WAC5C,KAAKc,QAAL,EAAed,GAAf,CAAP;WACO,IAAP;;SAEK,KAAP;CALF;;AAaA,IAAIuB,cAAcpE,aAAa,YAAb,CAAlB;;AAcA,SAAS4C,eAAT,CAA0ByB,UAA1B,EAAoD;SAC3CC,cAAP,CAAsB,IAAtB,EAA4BF,WAA5B,EAAyC;WAChCC;GADT;;SAaSpC,IAAP,CAAYoC,UAAZ,EAAwBE,OAAxB,CAAgCC,eAAhC,EAAiD,IAAjD;;AAIJ5B,gBAAgBJ,SAAhB,GAA4BN,OAAOuC,MAAP,CAAc,IAAd,CAA5B;;AAEA,IAAI,OAAO1E,MAAP,KAAkB,WAAlB,IAAiCA,OAAO2E,WAA5C,EACExC,OAAOoC,cAAP,CAAsB1B,gBAAgBJ,SAAtC,EAAiDzC,OAAO2E,WAAxD,EAAqE;SAC5D;CADT;;AAIF,SAASF,eAAT,CAA0B3B,GAA1B,EAA+B;SACtByB,cAAP,CAAsB,IAAtB,EAA4BzB,GAA5B,EAAiC;gBACnB,IADmB;SAE1B,eAAY;aACR,KAAKuB,WAAL,EAAkBvB,GAAlB,CAAP;;GAHJ;;;ACvOF,SAAS8B,iBAAT,GAA8B;QACtB,IAAIlB,UAAJ,CAAe,wBAAwBmB,MAAxB,GAAiC,OAAjC,GAA2CC,SAA1D,CAAN;;AAEF,AAAO,SAASC,iBAAT,CAA4BF,MAA5B,EAAoCC,SAApC,EAA+C;MAChDE,iBAAiBF,aAAaA,UAAUrE,MAAV,CAAiB,CAAjB,EAAoBqE,UAAUG,OAAV,CAAkB,GAAlB,IAAyB,CAA7C,CAAlC;;MAEIC,YAAYL,OAAO,CAAP,CAAhB;MACIM,aAAaN,OAAO,CAAP,CAAjB;;MAGIK,cAAc,GAAd,IAAqBC,eAAe,GAAxC,EAA6C;QACvC,CAACH,cAAL,EACEJ,kBAAkBC,MAAlB,EAA0BC,SAA1B;WACKE,iBAAiBH,MAAxB;GAHF,MAMK,IAAIK,cAAc,GAAd,KAAsBC,eAAe,GAAf,IAAsBA,eAAe,GAAf,KAAuBN,OAAO,CAAP,MAAc,GAAd,IAAqBA,OAAO/D,MAAP,KAAkB,CAA9D,CAAtB,IAA0F+D,OAAO/D,MAAP,KAAkB,CAAlI,KACFoE,cAAc,GADhB,EACqB;UACpBE,gBAAgB,CAACJ,cAAD,IAAmBF,UAAUE,eAAelE,MAAzB,MAAqC,GAA5E;;UAIIuE,QAAJ;UACID,aAAJ,EAAmB;YAEbN,cAAczC,SAAlB,EACEuC,kBAAkBC,MAAlB,EAA0BC,SAA1B;mBACSA,SAAX;OAJF,MAMK,IAAIA,UAAUE,eAAelE,MAAf,GAAwB,CAAlC,MAAyC,GAA7C,EAAkD;YAEjDkE,mBAAmB,OAAvB,EAAgC;qBACnBF,UAAUrE,MAAV,CAAiBuE,eAAelE,MAAf,GAAwB,CAAzC,CAAX;qBACWuE,SAAS5E,MAAT,CAAgB4E,SAASJ,OAAT,CAAiB,GAAjB,IAAwB,CAAxC,CAAX;SAFF,MAIK;qBACQH,UAAUrE,MAAV,CAAiB,CAAjB,CAAX;;OAPC,MAUA;mBAEQqE,UAAUrE,MAAV,CAAiBuE,eAAelE,MAAf,GAAwB,CAAzC,CAAX;;;UAGEoE,cAAc,GAAlB,EAAuB;YACjBE,aAAJ,EACER,kBAAkBC,MAAlB,EAA0BC,SAA1B,EADF,KAGE,OAAOA,UAAUrE,MAAV,CAAiB,CAAjB,EAAoBqE,UAAUhE,MAAV,GAAmBuE,SAASvE,MAA5B,GAAqC,CAAzD,IAA8D+D,MAArE;;;UAMAS,YAAYD,SAAS5E,MAAT,CAAgB,CAAhB,EAAmB4E,SAAS3E,WAAT,CAAqB,GAArB,IAA4B,CAA/C,IAAoDmE,MAApE;;UAEIU,SAAS,EAAb;UACIC,eAAenD,SAAnB;;WAEK,IAAIoD,IAAI,CAAb,EAAgBA,IAAIH,UAAUxE,MAA9B,EAAsC2E,GAAtC,EAA2C;YAErCD,iBAAiBnD,SAArB,EAAgC;cAC1BiD,UAAUG,CAAV,MAAiB,GAArB,EAA0B;mBACjBC,IAAP,CAAYJ,UAAU7E,MAAV,CAAiB+E,YAAjB,EAA+BC,IAAID,YAAJ,GAAmB,CAAlD,CAAZ;2BACenD,SAAf;;;;;YAMAiD,UAAUG,CAAV,MAAiB,GAArB,EAA0B;cAEpBH,UAAUG,IAAI,CAAd,MAAqB,GAArB,KAA6BH,UAAUG,IAAI,CAAd,MAAqB,GAArB,IAA4BA,MAAMH,UAAUxE,MAAV,GAAmB,CAAlF,CAAJ,EAA0F;mBACjF6E,GAAP;iBACK,CAAL;WAFF,MAKK,IAAIL,UAAUG,IAAI,CAAd,MAAqB,GAArB,IAA4BA,MAAMH,UAAUxE,MAAV,GAAmB,CAAzD,EAA4D;mBAC1D,CAAL;aADG,MAGA;6BAEY2E,CAAf;;;;cAKEL,iBAAiBG,OAAOzE,MAAP,KAAkB,CAAvC,EACE8D,kBAAkBC,MAAlB,EAA0BC,SAA1B;;cAGEW,MAAMH,UAAUxE,MAApB,EACEyE,OAAOG,IAAP,CAAY,EAAZ;;;;uBAKWD,CAAf;;;UAGED,iBAAiBnD,SAArB,EACEkD,OAAOG,IAAP,CAAYJ,UAAU7E,MAAV,CAAiB+E,YAAjB,EAA+BF,UAAUxE,MAAV,GAAmB0E,YAAlD,CAAZ;;aAEKV,UAAUrE,MAAV,CAAiB,CAAjB,EAAoBqE,UAAUhE,MAAV,GAAmBuE,SAASvE,MAAhD,IAA0DyE,OAAOK,IAAP,CAAY,EAAZ,CAAjE;;;MAKEC,gBAAgBhB,OAAOI,OAAP,CAAe,GAAf,CAApB;MACIY,kBAAkB,CAAC,CAAvB,EAA0B;QACpBxG,MAAJ,EAAY;UAENwF,OAAO,CAAP,MAAc,GAAd,IAAqBA,OAAO,CAAP,MAAc,IAAnC,IAA2CA,OAAO,CAAP,EAAUlF,KAAV,CAAgB,QAAhB,CAA/C,EACE,OAAO,aAAakF,OAAOjE,OAAP,CAAe,KAAf,EAAsB,GAAtB,CAApB;;WAEGiE,MAAP;;;;ACvGJ,IAAIiB,oBAAoB7F,aAAa,mBAAb,CAAxB;;AAEA,SAAS8F,cAAT,GAA2B;SAClB3B,IAAP,CAAY,IAAZ;;OAEK0B,iBAAL,IAA0B;kBAEVzD,SAFU;;aAIf;GAJX;;OAQK2D,KAAL,GAAa,KAAb;;;AAGFD,eAAetD,SAAf,GAA2BN,OAAOuC,MAAP,CAAcpC,OAAOG,SAArB,CAA3B;AACAsD,eAAetD,SAAf,CAAyBC,WAAzB,GAAuCqD,cAAvC;;AAEA,IAAIE,cAAcF,eAAeG,WAAf,GAA6BjG,aAAa,aAAb,CAA/C;;AAGA8F,eAAetD,SAAf,CAAyBsD,eAAenE,OAAf,GAAyBU,OAAOV,OAAzD,IAAoE,UAAUkB,GAAV,EAAeqD,SAAf,EAA0B;SACrFpB,kBAAkBjC,GAAlB,EAAuBqD,aAAahG,OAApC,CAAP;CADF;;AAIA4F,eAAetD,SAAf,CAAyBwD,WAAzB,IAAwC,UAAUnD,GAAV,EAAesD,mBAAf,EAAoC,EAA5E;;AAKA,SAASC,gBAAT,CAA2BC,KAA3B,EAAkCxD,GAAlC,EAAuCyD,YAAvC,EAAqD;SAC5CD,MAAME,OAAN,CAAc1D,GAAd,IAAqB;SACrBA,GADqB;;kBAIZyD,YAJY;;YAOlBlE,SAPkB;;qBAYTA,SAZS;;gBAed;0BAEUA,SAFV;oBAGIA,SAHJ;eAIDA,SAJC;wBAKQ,KALR;;iBAQCA,SARD;;eAWDA,SAXC;;8BAccA,SAdd;;gCAgBgBA,SAhBhB;;cAqBF,KArBE;;aAuBHA;;GAtCX;;;AAiDF0D,eAAetD,SAAf,CAAyBH,OAAOe,kBAAhC,IAAsD,UAAUP,GAAV,EAAeqD,SAAf,EAA0B;MAC1EnD,SAAS,IAAb;MACIsD,QAAQ,KAAKR,iBAAL,CAAZ;MACIvD,WAAWS,OAAOT,QAAP,CAAgBS,OAAOT,QAAP,CAAgBsB,SAAhC,CAAf;;SAEOR,mBAAmBL,MAAnB,EAA2BF,GAA3B,EAAgCqD,SAAhC,EAA2C5D,QAA3C,EAAqD+D,KAArD,EACNrD,IADM,CACD,UAAUwD,YAAV,EAAwB;QACxBA,wBAAwB5D,eAA5B,EACE,OAAO4D,YAAP;;QAGEA,aAAa7D,MAAjB,EACE,OAAO6D,aAAa7D,MAApB;;QAGE6D,aAAaC,UAAb,CAAwBC,MAA5B,EACE,OAAOC,eAAe5D,MAAf,EAAuByD,YAAvB,EAAqCA,aAAaC,UAAlD,EAA8DnE,QAA9D,EAAwE+D,KAAxE,EAA+EjE,SAA/E,CAAP;;WAEKwE,gBAAgB7D,MAAhB,EAAwByD,YAAxB,EAAsCA,aAAaC,UAAnD,EAA+DnE,QAA/D,EAAyE+D,KAAzE,EAAgF,CAACG,YAAD,CAAhF,EACNxD,IADM,CACD,YAAY;aACT2D,eAAe5D,MAAf,EAAuByD,YAAvB,EAAqCA,aAAaC,UAAlD,EAA8DnE,QAA9D,EAAwE+D,KAAxE,EAA+EjE,SAA/E,CAAP;KAFK,WAIA,UAAUf,GAAV,EAAe;sBACJ0B,MAAhB,EAAwByD,YAAxB;YACMnF,GAAN;KANK,CAAP;GAbK,CAAP;CALF;;AA6BA,SAAS+B,kBAAT,CAA6BL,MAA7B,EAAqCF,GAArC,EAA0CqD,SAA1C,EAAqD5D,QAArD,EAA+D+D,KAA/D,EAAsE;MAGhE1D,SAASL,SAASO,GAAT,CAAb;MACIF,MAAJ,EACE,OAAOjB,QAAQC,OAAR,CAAgBgB,MAAhB,CAAP;;MAEEkE,OAAOR,MAAME,OAAN,CAAc1D,GAAd,CAAX;;MAGIgE,QAAQ,CAACA,KAAKlE,MAAlB,EACE,OAAOsD,YAAYlD,MAAZ,EAAoB8D,IAApB,EAA0BA,KAAKJ,UAA/B,EAA2CnE,QAA3C,EAAqD+D,KAArD,CAAP;;SAEKtD,OAAOpB,OAAP,CAAekB,GAAf,EAAoBqD,SAApB,EACNlD,IADM,CACD,UAAUQ,WAAV,EAAuB;aAElBlB,SAASkB,WAAT,CAAT;QACIb,MAAJ,EACE,OAAOA,MAAP;;WAEK0D,MAAME,OAAN,CAAc/C,WAAd,CAAP;;QAMI,CAACqD,IAAD,IAASA,KAAKlE,MAAlB,EACEkE,OAAOT,iBAAiBC,KAAjB,EAAwB7C,WAAxB,EAAqCqD,QAAQA,KAAKP,YAAlD,CAAP;;QAEEQ,OAAOD,KAAKJ,UAAhB;QACI,CAACK,IAAL,EACE,OAAOD,IAAP;;WAEKZ,YAAYlD,MAAZ,EAAoB8D,IAApB,EAA0BC,IAA1B,EAAgCxE,QAAhC,EAA0C+D,KAA1C,CAAP;GApBK,CAAP;;;AAwBF,SAASU,yBAAT,CAAoChE,MAApC,EAA4C8D,IAA5C,EAAkDR,KAAlD,EAAyD;SAChD,YAAY;QACbW,eAAeX,MAAMW,YAAzB;;QAEI,CAACA,YAAL,EACE,OAAO,CAAC,CAACH,KAAKP,YAAd;;UAEIU,YAAN,GAAqB5E,SAArB;SACKkE,YAAL,GAAoBU,YAApB;;WAEO,IAAP;GATF;;;AAaF,SAASf,WAAT,CAAsBlD,MAAtB,EAA8B8D,IAA9B,EAAoCC,IAApC,EAA0CxE,QAA1C,EAAoD+D,KAApD,EAA2D;SAClDS,KAAKG,kBAAL,KAA4BH,KAAKG,kBAAL,GAEnC,CAACJ,KAAKP,YAAL,GAAoB5E,QAAQC,OAAR,EAApB,GAAwCD,QAAQC,OAAR,GAAkBqB,IAAlB,CAAuB,YAAY;UACpEgE,YAAN,GAAqB5E,SAArB;WACOW,OAAOiD,WAAP,EAAoBa,KAAKhE,GAAzB,EAA8BE,OAAOiD,WAAP,EAAoBnF,MAApB,GAA6B,CAA7B,IAAkCkG,0BAA0BhE,MAA1B,EAAkC8D,IAAlC,EAAwCR,KAAxC,CAAhE,CAAP;GAFuC,CAAzC,EAICrD,IAJD,CAIM,UAAUkE,aAAV,EAAyB;QAEzBA,kBAAkB9E,SAAtB,EAAiC;UAC3B,EAAE8E,yBAAyBtE,eAA3B,CAAJ,EACE,MAAM,IAAIhC,SAAJ,CAAc,mDAAd,CAAN;;aAEKyF,MAAME,OAAN,CAAcM,KAAKhE,GAAnB,CAAP;UACIE,OAAOgD,KAAX,EACEoB,UAAUpE,MAAV,EAAkB8D,IAAlB,EAAwBC,IAAxB;aACKxE,SAASuE,KAAKhE,GAAd,IAAqBqE,aAA5B;;;QAIEZ,eAAeO,KAAKP,YAAxB;;SAEKA,YAAL,GAAoBlE,SAApB;QACI,CAACkE,YAAL,EACE,MAAM,IAAI1F,SAAJ,CAAc,oFAAd,CAAN;;SAEGwG,YAAL,GAAoBd,aAAa,CAAb,CAApB;;SAEKe,eAAL,GAAuB,EAAvB;;SAEKC,SAAL,GAAiB,EAAjB;;QAGIhB,aAAa,CAAb,CAAJ,EAAqB;WACdgB,SAAL,cAAyB,EAAzB;WACKA,SAAL,CAAeC,YAAf,GAA8B,IAA9B;WACKC,gBAAL,GAAwBlB,aAAa,CAAb,CAAxB;WACKmB,OAAL,GAAenB,aAAa,CAAb,CAAf;KAJF,MAQK;4BACiBvD,MAApB,EAA4B8D,IAA5B,EAAkCC,IAAlC,EAAwCR,aAAa,CAAb,CAAxC;;;QAIE,CAACQ,KAAKM,YAAL,CAAkBvG,MAAvB,EAA+B;WACxB6F,MAAL,GAAc,IAAd;UACI3D,OAAOgD,KAAX,EACEoB,UAAUpE,MAAV,EAAkB8D,IAAlB,EAAwBC,IAAxB;;;WAGGD,IAAP;GAjDF,WAmDO,UAAUxF,GAAV,EAAe;UACdyF,KAAKY,KAAL,GAAaxE,kDAAW7B,GAAX,EAAgB,mBAAmBwF,KAAKhE,GAAxC,CAAnB;GApDF,CAFO,CAAP;;;AA2DF,SAAS8E,qBAAT,CAAgC5E,MAAhC,EAAwCF,GAAxC,EAA6CqD,SAA7C,EAAwD5D,QAAxD,EAAkE+D,KAAlE,EAAyEuB,WAAzE,EAAsF;SAwB7E7E,OAAOpB,OAAP,CAAekB,GAAf,EAAoBqD,SAApB,EACNlD,IADM,CACD,UAAUQ,WAAV,EAAuB;QACvBoE,WAAJ,EACEA,YAAY/E,GAAZ,IAAmBA,GAAnB;;QAGEgE,OAAOR,MAAME,OAAN,CAAc/C,WAAd,CAAX;QACIb,SAASL,SAASkB,WAAT,CAAb;;QAGIb,WAAW,CAACkE,IAAD,IAASA,KAAKlE,MAAL,IAAeA,WAAWkE,KAAKlE,MAAnD,CAAJ,EACE,OAAOA,MAAP;;QAME,CAACkE,IAAD,IAAS,CAAClE,MAAD,IAAWkE,KAAKlE,MAA7B,EACEkE,OAAOT,iBAAiBC,KAAjB,EAAwB7C,WAAxB,EAAqCqD,QAAQA,KAAKP,YAAlD,CAAP;;QAEEQ,OAAOD,KAAKJ,UAAhB;QACI,CAACK,IAAL,EACE,OAAOD,IAAP;;WAEKZ,YAAYlD,MAAZ,EAAoB8D,IAApB,EAA0BC,IAA1B,EAAgCxE,QAAhC,EAA0C+D,KAA1C,CAAP;GAxBK,CAAP;;;AA4BF,SAASc,SAAT,CAAoBpE,MAApB,EAA4B8D,IAA5B,EAAkCC,IAAlC,EAAwC;SAC/Be,KAAP,GAAe9E,OAAO8E,KAAP,IAAgB,EAA/B;SACOA,KAAP,CAAahB,KAAKhE,GAAlB,IAAyB;SAClBgE,KAAKhE,GADa;UAEjBiE,KAAKM,YAFY;YAGfN,KAAKgB,MAAL,IAAe;GAHzB;;;AAcF,SAASC,mBAAT,CAA8BhF,MAA9B,EAAsC8D,IAAtC,EAA4CC,IAA5C,EAAkDkB,OAAlD,EAA2D;MACrDV,YAAYR,KAAKQ,SAArB;MACID,kBAAkBR,KAAKQ,eAA3B;;MAEIY,SAAS,KAAb;;MAGIC,WAAWF,QAAQ7D,IAAR,CAAatE,SAAb,EAAqB,UAAUI,IAAV,EAAgBkI,KAAhB,EAAuB;QAErDF,MAAJ,EACE;;QAEE,OAAOhI,IAAP,KAAgB,QAApB,EAA8B;WACvB,IAAImI,CAAT,IAAcnI,IAAd;YACMmI,MAAM,cAAV,EACEd,UAAUc,CAAV,IAAenI,KAAKmI,CAAL,CAAf;;KAHN,MAKK;gBACOnI,IAAV,IAAkBkI,KAAlB;;;aAGO,IAAT;SACK,IAAI3C,IAAI,CAAb,EAAgBA,IAAI6B,gBAAgBxG,MAApC,EAA4C2E,GAA5C;sBACkBA,CAAhB,EAAmB8B,SAAnB;KACFW,SAAS,KAAT;;WAEOE,KAAP;GAnBa,EAoBZ,IAAIE,gBAAJ,CAAqBtF,MAArB,EAA6B8D,KAAKhE,GAAlC,CApBY,CAAf;;OAsBKyF,OAAL,GAAeJ,SAASI,OAAxB;OACKb,OAAL,GAAeS,SAAST,OAAxB;MACIS,SAASK,OAAb,EACEzB,KAAKQ,SAAL,GAAiBA,YAAYY,SAASK,OAAtC;;;AAGJ,SAAS3B,eAAT,CAA0B7D,MAA1B,EAAkC8D,IAAlC,EAAwCC,IAAxC,EAA8CxE,QAA9C,EAAwD+D,KAAxD,EAA+DmC,IAA/D,EAAqE;SAC5D,CAAC1B,KAAK2B,sBAAL,KAAgC3B,KAAK2B,sBAAL,GAA8B/G,QAAQC,OAAR,GACrEqB,IADqE,CAChE,YAAY;QACZ0F,0BAA0BC,MAAM7B,KAAKM,YAAL,CAAkBvG,MAAxB,CAA9B;;SAEK,IAAI2E,IAAI,CAAb,EAAgBA,IAAIsB,KAAKM,YAAL,CAAkBvG,MAAtC,EAA8C2E,GAA9C;8BAC0BA,CAAxB,IAA6BmC,sBAAsB5E,MAAtB,EAA8B+D,KAAKM,YAAL,CAAkB5B,CAAlB,CAA9B,EAAoDqB,KAAKhE,GAAzD,EAA8DP,QAA9D,EAAwE+D,KAAxE,EAA+EtD,OAAOgD,KAAP,KAAiBe,KAAKgB,MAAL,GAAc,EAA/B,CAA/E,CAA7B;KAEF,OAAOpG,QAAQkH,GAAR,CAAYF,uBAAZ,CAAP;GAPoE,EASrE1F,IATqE,CAShE,UAAU6F,wBAAV,EAAoC;SACnCA,wBAAL,GAAgCA,wBAAhC;;QAGI/B,KAAKwB,OAAT,EAAkB;WACX,IAAI9C,IAAI,CAAb,EAAgBA,IAAIqD,yBAAyBhI,MAA7C,EAAqD2E,GAArD,EAA0D;YACpDsD,SAAShC,KAAKwB,OAAL,CAAa9C,CAAb,CAAb;YACIsD,MAAJ,EAAY;cACN5B,gBAAgB2B,yBAAyBrD,CAAzB,CAApB;;cAEI0B,yBAAyBtE,eAA7B,EAA8C;mBACrCsE,aAAP;WADF,MAGK;mBACIA,cAAcvE,MAAd,IAAwBuE,cAAcT,UAAd,CAAyBa,SAAxD;;gBAEIJ,cAAcG,eAAlB,EACEH,cAAcG,eAAd,CAA8B5B,IAA9B,CAAmCqD,MAAnC;;;;;GA1B0D,CAA9D,CAAD,EAgCN9F,IAhCM,CAgCD,YAAY;QAEZ+F,8BAA8B,EAAlC;;SAEK,IAAIvD,IAAI,CAAb,EAAgBA,IAAIsB,KAAKM,YAAL,CAAkBvG,MAAtC,EAA8C2E,GAA9C,EAAmD;UAC7CwD,UAAUlC,KAAK+B,wBAAL,CAA8BrD,CAA9B,CAAd;UACIyD,UAAUD,QAAQvC,UAAtB;;UAEI,CAACwC,OAAD,IAAYA,QAAQvC,MAAxB,EACE;;UAEE8B,KAAKxD,OAAL,CAAagE,OAAb,MAA0B,CAAC,CAA/B,EACE;WACGvD,IAAL,CAAUuD,OAAV;;kCAE4BvD,IAA5B,CAAiCmB,gBAAgB7D,MAAhB,EAAwBiG,OAAxB,EAAiCA,QAAQvC,UAAzC,EAAqDnE,QAArD,EAA+D+D,KAA/D,EAAsEmC,IAAtE,CAAjC;;;WAGK9G,QAAQkH,GAAR,CAAYG,2BAAZ,CAAP;GAlDK,EAoDN/F,IApDM,CAoDD,YAAY;SAGX0D,MAAL,GAAc,IAAd;QACI3D,OAAOgD,KAAX,EACEoB,UAAUpE,MAAV,EAAkB8D,IAAlB,EAAwBC,IAAxB;;WAEKD,IAAP;GA3DK,WA6DA,UAAUxF,GAAV,EAAe;UACd6B,kDAAW7B,GAAX,EAAgB,aAAawF,KAAKhE,GAAlC,CAAN;;SAKK6E,KAAL,GAAaZ,KAAKY,KAAL,IAAcrG,GAA3B;;UAEMA,GAAN;GArEK,CAAP;;;AA0EF,SAAS6H,eAAT,CAA0BnG,MAA1B,EAAkC8D,IAAlC,EAAwC;MAClCR,QAAQtD,OAAO8C,iBAAP,CAAZ;;MAGIQ,MAAME,OAAN,CAAcM,KAAKhE,GAAnB,MAA4BgE,IAAhC,EACE,OAAOR,MAAME,OAAN,CAAcM,KAAKhE,GAAnB,CAAP;;MAEEiE,OAAOD,KAAKJ,UAAhB;;MAEI,CAACK,IAAL,EACE;;MAEEA,KAAK+B,wBAAT,EACE/B,KAAK+B,wBAAL,CAA8BtE,OAA9B,CAAsC,UAAUyE,OAAV,EAAmBG,KAAnB,EAA0B;QAC1D,CAACH,OAAD,IAAYA,mBAAmBpG,eAAnC,EACE;;QAEEoG,QAAQvC,UAAZ,EAAwB;UAClBuC,QAAQvC,UAAR,CAAmBiB,KAAvB,EAA8B;YAExBrB,MAAME,OAAN,CAAcyC,QAAQnG,GAAtB,MAA+BmG,OAAnC,EACEE,gBAAgBnG,MAAhB,EAAwBiG,OAAxB;;;UAIAlC,KAAKwB,OAAL,IAAgBU,QAAQ3B,eAA5B,EAA6C;YACvC+B,cAAcJ,QAAQ3B,eAAR,CAAwBrC,OAAxB,CAAgC8B,KAAKwB,OAAL,CAAaa,KAAb,CAAhC,CAAlB;gBACQ9B,eAAR,CAAwBgC,MAAxB,CAA+BD,WAA/B,EAA4C,CAA5C;;;GAdN;;;AAuBJtD,eAAetD,SAAf,CAAyB8G,QAAzB,GAAoC,UAAUzG,GAAV,EAAe0G,IAAf,EAAqBvB,OAArB,EAA8B;MAC5D3B,QAAQ,KAAKR,iBAAL,CAAZ;;MAGImC,YAAY5F,SAAhB,EAA2B;UACnB4E,YAAN,GAAqB,CAACnE,GAAD,EAAM0G,IAAN,EAAYnH,SAAZ,CAArB;GADF,MAKK;UACCyE,OAAOR,MAAME,OAAN,CAAc1D,GAAd,KAAsBuD,iBAAiBC,KAAjB,EAAwBxD,GAAxB,EAA6BT,SAA7B,CAAjC;WACKkE,YAAL,GAAoB,CAACiD,IAAD,EAAOvB,OAAP,EAAgB5F,SAAhB,CAApB;;CAXJ;;AAkBA0D,eAAetD,SAAf,CAAyBgH,eAAzB,GAA2C,UAAU3G,GAAV,EAAe0G,IAAf,EAAqB/B,gBAArB,EAAuCC,OAAvC,EAAgD;MACrFpB,QAAQ,KAAKR,iBAAL,CAAZ;;MAGI,OAAOhD,GAAP,KAAe,QAAnB,EAA6B;UACrBmE,YAAN,GAAqB,CAACnE,GAAD,EAAM0G,IAAN,EAAY/B,gBAAZ,CAArB;GADF,MAKK;UACCX,OAAOR,MAAME,OAAN,CAAc1D,GAAd,KAAsBuD,iBAAiBC,KAAjB,EAAwBxD,GAAxB,EAA6BT,SAA7B,CAAjC;WACKkE,YAAL,GAAoB,CAACiD,IAAD,EAAO/B,gBAAP,EAAyBC,OAAzB,CAApB;;CAXJ;;AAiBA,SAASY,gBAAT,CAA2BtF,MAA3B,EAAmCF,GAAnC,EAAwC;OACjCE,MAAL,GAAcA,MAAd;OACKF,GAAL,GAAW,KAAK4G,EAAL,GAAU5G,GAArB;;AAEFwF,iBAAiB7F,SAAjB,CAA2BC,WAA3B,GAAyC,YAAY;QAC7C,IAAI7B,SAAJ,CAAc,4DAAd,CAAN;CADF;AAGAyH,iBAAiB7F,SAAjB,aAAoC,UAAUK,GAAV,EAAe;SAC1C,KAAKE,MAAL,WAAmBF,GAAnB,EAAwB,KAAKA,GAA7B,CAAP;CADF;AAGAwF,iBAAiB7F,SAAjB,CAA2Bb,OAA3B,GAAqC,UAAUkB,GAAV,EAAe;SAC3C,KAAKE,MAAL,CAAYpB,OAAZ,CAAoBkB,GAApB,EAAyB,KAAKA,GAA9B,CAAP;CADF;AAGAwF,iBAAiB7F,SAAjB,CAA2BqE,IAA3B,GAAkC,UAAUhE,GAAV,EAAe;SACxC,KAAKE,MAAL,CAAY8D,IAAZ,CAAiBhE,GAAjB,EAAsB,KAAKA,GAA3B,CAAP;CADF;;AAKA,SAAS8D,cAAT,CAAyB5D,MAAzB,EAAiC8D,IAAjC,EAAuCC,IAAvC,EAA6CxE,QAA7C,EAAuD+D,KAAvD,EAA8DmC,IAA9D,EAAoE;MAC9D3B,KAAKlE,MAAT,EACE,OAAOkE,KAAKlE,MAAZ;;MAEEmE,KAAKY,KAAT,EACE,MAAMZ,KAAKY,KAAX;;MAEEc,QAAQA,KAAKxD,OAAL,CAAa6B,IAAb,MAAuB,CAAC,CAApC,EACE,OAAOA,KAAKJ,UAAL,CAAgBa,SAAvB;;MAIEjG,MAAMqI,WAAW3G,MAAX,EAAmB8D,IAAnB,EAAyBC,IAAzB,EAA+BxE,QAA/B,EAAyC+D,KAAzC,EAAgDS,KAAKwB,OAAL,GAAe,EAAf,GAAoBE,QAAQ,EAA5E,CAAV;MACInH,GAAJ,EAAS;oBACS0B,MAAhB,EAAwB8D,IAAxB;UACMxF,GAAN;;;SAGKwF,KAAKlE,MAAZ;;;AAGF,SAASgH,kBAAT,CAA6B5G,MAA7B,EAAqCF,GAArC,EAA0CuE,YAA1C,EAAwDyB,wBAAxD,EAAkFvG,QAAlF,EAA4F+D,KAA5F,EAAmGmC,IAAnG,EAAyG;SAEhG,UAAUvI,IAAV,EAAgB;SAChB,IAAIuF,IAAI,CAAb,EAAgBA,IAAI4B,aAAavG,MAAjC,EAAyC2E,GAAzC,EAA8C;UACxC4B,aAAa5B,CAAb,MAAoBvF,IAAxB,EAA8B;YACxB+I,UAAUH,yBAAyBrD,CAAzB,CAAd;YACI7C,MAAJ;;YAEIqG,mBAAmBpG,eAAvB,EACED,SAASqG,OAAT,CADF,KAGErG,SAASgE,eAAe5D,MAAf,EAAuBiG,OAAvB,EAAgCA,QAAQvC,UAAxC,EAAoDnE,QAApD,EAA8D+D,KAA9D,EAAqEmC,IAArE,CAAT;;eAEK7F,OAAO4E,YAAP,GAAsB5E,iBAAtB,GAAuCA,MAA9C;;;UAGE,IAAI5B,KAAJ,CAAU,YAAYd,IAAZ,GAAmB,0DAAnB,GAAgF4C,GAA1F,CAAN;GAdF;;;AAoBF,SAAS6G,UAAT,CAAqB3G,MAArB,EAA6B8D,IAA7B,EAAmCC,IAAnC,EAAyCxE,QAAzC,EAAmD+D,KAAnD,EAA0DmC,IAA1D,EAAgE;OACzD/C,IAAL,CAAUoB,IAAV;;MAEIxF,GAAJ;;MAIIyF,KAAKwB,OAAT,EAAkB;QACZU,OAAJ,EAAaC,OAAb;SACK,IAAIzD,IAAI,CAAb,EAAgBA,IAAIsB,KAAKM,YAAL,CAAkBvG,MAAtC,EAA8C2E,GAA9C,EAAmD;gBACvCsB,KAAK+B,wBAAL,CAA8BrD,CAA9B,CAAV;;UAEIwD,mBAAmBpG,eAAvB,EACE;;gBAGQoG,QAAQvC,UAAlB;UACIwC,WAAWT,KAAKxD,OAAL,CAAagE,OAAb,MAA0B,CAAC,CAA1C,EAA6C;YACvCC,QAAQvB,KAAZ,EACErG,MAAM4H,QAAQvB,KAAd,CADF,KAKErG,MAAMqI,WAAW3G,MAAX,EAAmBiG,OAAnB,EAA4BC,OAA5B,EAAqC3G,QAArC,EAA+C+D,KAA/C,EAAsD4C,QAAQX,OAAR,GAAkBE,IAAlB,GAAyB,EAA/E,CAAN;;;UAGAnH,GAAJ,EACE,OAAOyF,KAAKY,KAAL,GAAaxE,kDAAW7B,GAAX,EAAgB,gBAAgBwF,KAAKhE,GAArC,CAApB;;;;MAKFiE,KAAKW,OAAT,EAAkB;QAGZX,KAAKwB,OAAT,EAAkB;YACVsB,mBAAmB9C,KAAKW,OAAxB,CAAN;KADF,MAKK;YACC9E,SAAS,EAAE8G,IAAI5C,KAAKhE,GAAX,EAAb;YACIyE,YAAYR,KAAKQ,SAArB;eACOhD,cAAP,CAAsB3B,MAAtB,EAA8B,SAA9B,EAAyC;wBACzB,IADyB;eAElC,aAAU4F,OAAV,EAAmB;mCACFA,OAApB;WAHqC;eAKlC,eAAY;mBACRjB,oBAAP;;SANJ;;YAUIuC,UAAUF,mBAAmB5G,MAAnB,EAA2B8D,KAAKhE,GAAhC,EAAqCiE,KAAKM,YAA1C,EAAwDN,KAAK+B,wBAA7D,EAAuFvG,QAAvF,EAAiG+D,KAAjG,EAAwGmC,IAAxG,CAAd;;YAGI,CAAC1B,KAAKU,gBAAV,EACE,KAAK,IAAIhC,IAAI,CAAb,EAAgBA,IAAIsB,KAAKM,YAAL,CAAkBvG,MAAtC,EAA8C2E,GAA9C;kBACUsB,KAAKM,YAAL,CAAkB5B,CAAlB,CAAR;SAEJnE,MAAMyI,eAAehD,KAAKW,OAApB,EAA6BoC,OAA7B,EAAsCvC,oBAAtC,EAAyD3E,MAAzD,CAAN;;YAGIA,OAAO4F,OAAP,KAAmBjB,oBAAvB,EACEA,uBAAoB3E,OAAO4F,OAA3B;;YAGEjB,wBAAqBA,qBAAkByC,UAA3C,EACE,KAAK,IAAI3B,CAAT,IAAcd,oBAAd;cACMpF,OAAOgC,cAAP,CAAsBC,IAAtB,CAA2BmD,oBAA3B,EAA8Cc,CAA9C,KAAoDA,MAAM,SAA9D,EACEd,UAAUc,CAAV,IAAed,qBAAkBc,CAAlB,CAAf;;;;;MAIN/G,GAAJ,EACE,OAAOyF,KAAKY,KAAL,GAAaxE,kDAAW7B,GAAX,EAAgB,gBAAgBwF,KAAKhE,GAArC,CAApB;;WAEOgE,KAAKhE,GAAd,IAAqBgE,KAAKlE,MAAL,GAAc,IAAIC,eAAJ,CAAoBkE,KAAKQ,SAAzB,CAAnC;;MAKI,CAACR,KAAKwB,OAAV,EAAmB;QACbzB,KAAKQ,eAAT,EACE,KAAK,IAAI7B,IAAI,CAAb,EAAgBA,IAAIqB,KAAKQ,eAAL,CAAqBxG,MAAzC,EAAiD2E,GAAjD;WACO6B,eAAL,CAAqB7B,CAArB,EAAwBqB,KAAKlE,MAA7B;KACJkE,KAAKQ,eAAL,GAAuBjF,SAAvB;;;OAIGqE,UAAL,GAAkBrE,SAAlB;;;AAIF,IAAI4H,cAAc,EAAlB;AACA,IAAI9H,OAAO+H,MAAX,EACE/H,OAAO+H,MAAP,CAAcD,WAAd;;AAEF,SAASJ,kBAAT,CAA6BnC,OAA7B,EAAsC;MAChC;YACMtD,IAAR,CAAa6F,WAAb;GADF,CAGA,OAAOE,CAAP,EAAU;WACDA,CAAP;;;;AAIJ,SAASJ,cAAT,CAAyBrC,OAAzB,EAAkCoC,OAAlC,EAA2CtB,OAA3C,EAAoD5F,MAApD,EAA4D;MACtD;QACE2C,SAASmC,QAAQtD,IAAR,CAAatE,SAAb,EAAqBgK,OAArB,EAA8BtB,OAA9B,EAAuC5F,MAAvC,CAAb;QACI2C,WAAWlD,SAAf,EACEO,OAAO4F,OAAP,GAAiBjD,MAAjB;GAHJ,CAKA,OAAO4E,CAAP,EAAU;WACDA,CAAP;;;;AChpBG,IAAMC,eAAe,SAAfA,YAAe,GAIjB;gFAAP,EAAO;KAHVC,IAGU,QAHVA,IAGU;yBAFVzI,OAEU;KAFVA,OAEU,gCAFAmE,eAAetD,SAAf,CAAyBsD,eAAenE,OAAxC,CAEA;6BADVsE,WACU;KADVA,WACU,oCADIH,eAAetD,SAAf,CAAyBsD,eAAeG,WAAxC,CACJ;;KACJlD,SAAS,IAAI+C,cAAJ,EAAf;;KAEIsE,IAAJ,EAAU;SACFtF,kBAAkBsF,IAAlB,EAAwBlK,OAAxB,KAAoC4E,yBAAuBsF,IAAvB,EAA+BlK,OAA/B,CAA3C;EADD,MAEO;SACCA,OAAP;;;KAGGkK,KAAKA,KAAKvJ,MAAL,GAAc,CAAnB,MAA0B,GAA9B,EAAmC;UAC1B,GAAR;;;QAGMiF,eAAenE,OAAtB,IAAiC,UAASkB,GAAT,EAA6B;MAAfC,MAAe,uEAANsH,IAAM;;SACtDzI,QAAQwC,IAAR,CAAa,IAAb,EAAmBtB,GAAnB,EAAwBC,MAAxB,KAAmCD,GAA1C;EADD;;QAIOiD,eAAeG,WAAtB,IAAqCA,WAArC;;QAEOlD,MAAP;CAvBM;;ICFMsH,sBAAsB,SAAtBA,mBAAsB,GAAmB;gFAAP,EAAO;KAAhBD,IAAgB,QAAhBA,IAAgB;;QAC9CD,aAAa,EAAEC,UAAF,EAAb,CAAP;CADM;;;;;;;;;;"}