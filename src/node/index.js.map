{"version":3,"file":"createLoader.js","sources":["../../node_modules/es-module-loader/core/common.js","../../node_modules/es-module-loader/core/loader-polyfill.js","../../node_modules/es-module-loader/core/resolve.js","../../node_modules/es-module-loader/core/register-loader.js","../createLoader.js","../../node_modules/node-fetch/lib/index.es.js","fetchModule.js","isNodeBuiltinModule.js","createLoader.js"],"sourcesContent":["/*\n * Environment\n */\nexport var isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined';\nexport var isNode = typeof process !== 'undefined' && process.versions && process.versions.node;\nexport var isWindows = typeof process !== 'undefined' && typeof process.platform === 'string' && process.platform.match(/^win/);\n\nvar envGlobal = typeof self !== 'undefined' ? self : global;\nexport { envGlobal as global }\n\n/*\n * Simple Symbol() shim\n */\nvar hasSymbol = typeof Symbol !== 'undefined';\nexport function createSymbol (name) {\n  return hasSymbol ? Symbol() : '@@' + name;\n}\n\nexport function pathToFileUrl (filePath) {\n  return 'file://' + (isWindows ? '/' : '') + (isWindows ? filePath.replace(/\\\\/g, '/') : filePath);\n}\n\nexport function fileUrlToPath (fileUrl) {\n  if (fileUrl.substr(0, 7) !== 'file://')\n    throw new RangeError(fileUrl + ' is not a valid file url');\n  if (isWindows)\n    return fileUrl.substr(8).replace(/\\\\/g, '/');\n  else\n    return fileUrl.substr(7);\n}\n\n/*\n * Environment baseURI\n */\nexport var baseURI;\n\n// environent baseURI detection\nif (typeof document != 'undefined' && document.getElementsByTagName) {\n  baseURI = document.baseURI;\n\n  if (!baseURI) {\n    var bases = document.getElementsByTagName('base');\n    baseURI = bases[0] && bases[0].href || window.location.href;\n  }\n}\nelse if (typeof location != 'undefined') {\n  baseURI = location.href;\n}\n\n// sanitize out the hash and querystring\nif (baseURI) {\n  baseURI = baseURI.split('#')[0].split('?')[0];\n  baseURI = baseURI.substr(0, baseURI.lastIndexOf('/') + 1);\n}\nelse if (typeof process != 'undefined' && process.cwd) {\n  baseURI = 'file://' + (isWindows ? '/' : '') + process.cwd();\n  if (isWindows)\n    baseURI = baseURI.replace(/\\\\/g, '/');\n}\nelse {\n  throw new TypeError('No environment baseURI');\n}\n\n// ensure baseURI has trailing \"/\"\nif (baseURI[baseURI.length - 1] !== '/')\n  baseURI += '/';\n\n/*\n * LoaderError with chaining for loader stacks\n */\nvar errArgs = new Error(0, '_').fileName == '_';\nfunction LoaderError__Check_error_message_for_loader_stack (childErr, newMessage) {\n  // Convert file:/// URLs to paths in Node\n  if (!isBrowser)\n    newMessage = newMessage.replace(isWindows ? /file:\\/\\/\\//g : /file:\\/\\//g, '');\n\n  var message = (childErr.message || childErr) + '\\n  ' + newMessage;\n\n  var err;\n  if (errArgs && childErr.fileName)\n    err = new Error(message, childErr.fileName, childErr.lineNumber);\n  else\n    err = new Error(message);\n\n\n  var stack = childErr.originalErr ? childErr.originalErr.stack : childErr.stack;\n\n  if (isNode)\n    // node doesn't show the message otherwise\n    err.stack = message + '\\n  ' + stack;\n  else\n    err.stack = stack;\n\n  err.originalErr = childErr.originalErr || childErr;\n\n  return err;\n}\nexport { LoaderError__Check_error_message_for_loader_stack as addToError }\n","import { addToError, createSymbol } from './common.js';\n\nexport { Loader, ModuleNamespace }\n\nvar resolvedPromise = Promise.resolve();\n\n/*\n * Simple Array values shim\n */\nfunction arrayValues (arr) {\n  if (arr.values)\n    return arr.values();\n\n  if (typeof Symbol === 'undefined' || !Symbol.iterator)\n    throw new Error('Symbol.iterator not supported in this browser');\n\n  var iterable = {};\n  iterable[Symbol.iterator] = function () {\n    var keys = Object.keys(arr);\n    var keyIndex = 0;\n    return {\n      next: function () {\n        if (keyIndex < keys.length)\n          return {\n            value: arr[keys[keyIndex++]],\n            done: false\n          };\n        else\n          return {\n            value: undefined,\n            done: true\n          };\n      }\n    };\n  };\n  return iterable;\n}\n\n/*\n * 3. Reflect.Loader\n *\n * We skip the entire native internal pipeline, just providing the bare API\n */\n// 3.1.1\nfunction Loader () {\n  this.registry = new Registry();\n}\n// 3.3.1\nLoader.prototype.constructor = Loader;\n\nfunction ensureInstantiated (module) {\n  if (!(module instanceof ModuleNamespace))\n    throw new TypeError('Module instantiation did not return a valid namespace object.');\n  return module;\n}\n\n// 3.3.2\nLoader.prototype.import = function (key, parent) {\n  if (typeof key !== 'string')\n    throw new TypeError('Loader import method must be passed a module key string');\n  // custom resolveInstantiate combined hook for better perf\n  var loader = this;\n  return resolvedPromise\n  .then(function () {\n    return loader[RESOLVE_INSTANTIATE](key, parent);\n  })\n  .then(ensureInstantiated)\n  //.then(Module.evaluate)\n  .catch(function (err) {\n    throw addToError(err, 'Loading ' + key + (parent ? ' from ' + parent : ''));\n  });\n};\n// 3.3.3\nvar RESOLVE = Loader.resolve = createSymbol('resolve');\n\n/*\n * Combined resolve / instantiate hook\n *\n * Not in current reduced spec, but necessary to separate RESOLVE from RESOLVE + INSTANTIATE as described\n * in the spec notes of this repo to ensure that loader.resolve doesn't instantiate when not wanted.\n *\n * We implement RESOLVE_INSTANTIATE as a single hook instead of a separate INSTANTIATE in order to avoid\n * the need for double registry lookups as a performance optimization.\n */\nvar RESOLVE_INSTANTIATE = Loader.resolveInstantiate = createSymbol('resolveInstantiate');\n\n// default resolveInstantiate is just to call resolve and then get from the registry\n// this provides compatibility for the resolveInstantiate optimization\nLoader.prototype[RESOLVE_INSTANTIATE] = function (key, parent) {\n  var loader = this;\n  return loader.resolve(key, parent)\n  .then(function (resolved) {\n    return loader.registry.get(resolved);\n  });\n};\n\nfunction ensureResolution (resolvedKey) {\n  if (resolvedKey === undefined)\n    throw new RangeError('No resolution found.');\n  return resolvedKey;\n}\n\nLoader.prototype.resolve = function (key, parent) {\n  var loader = this;\n  return resolvedPromise\n  .then(function() {\n    return loader[RESOLVE](key, parent);\n  })\n  .then(ensureResolution)\n  .catch(function (err) {\n    throw addToError(err, 'Resolving ' + key + (parent ? ' to ' + parent : ''));\n  });\n};\n\n// 3.3.4 (import without evaluate)\n// this is not documented because the use of deferred evaluation as in Module.evaluate is not\n// documented, as it is not considered a stable feature to be encouraged\n// Loader.prototype.load may well be deprecated if this stays disabled\n/* Loader.prototype.load = function (key, parent) {\n  return Promise.resolve(this[RESOLVE_INSTANTIATE](key, parent || this.key))\n  .catch(function (err) {\n    throw addToError(err, 'Loading ' + key + (parent ? ' from ' + parent : ''));\n  });\n}; */\n\n/*\n * 4. Registry\n *\n * Instead of structuring through a Map, just use a dictionary object\n * We throw for construction attempts so this doesn't affect the public API\n *\n * Registry has been adjusted to use Namespace objects over ModuleStatus objects\n * as part of simplifying loader API implementation\n */\nvar iteratorSupport = typeof Symbol !== 'undefined' && Symbol.iterator;\nvar REGISTRY = createSymbol('registry');\nfunction Registry() {\n  this[REGISTRY] = {};\n  this._registry = REGISTRY;\n}\n// 4.4.1\nif (iteratorSupport) {\n  // 4.4.2\n  Registry.prototype[Symbol.iterator] = function () {\n    return this.entries()[Symbol.iterator]();\n  };\n\n  // 4.4.3\n  Registry.prototype.entries = function () {\n    var registry = this[REGISTRY];\n    return arrayValues(Object.keys(registry).map(function (key) {\n      return [key, registry[key]];\n    }));\n  };\n}\n\n// 4.4.4\nRegistry.prototype.keys = function () {\n  return arrayValues(Object.keys(this[REGISTRY]));\n};\n// 4.4.5\nRegistry.prototype.values = function () {\n  var registry = this[REGISTRY];\n  return arrayValues(Object.keys(registry).map(function (key) {\n    return registry[key];\n  }));\n};\n// 4.4.6\nRegistry.prototype.get = function (key) {\n  return this[REGISTRY][key];\n};\n// 4.4.7\nRegistry.prototype.set = function (key, namespace) {\n  if (!(namespace instanceof ModuleNamespace))\n    throw new Error('Registry must be set with an instance of Module Namespace');\n  this[REGISTRY][key] = namespace;\n  return this;\n};\n// 4.4.8\nRegistry.prototype.has = function (key) {\n  return Object.hasOwnProperty.call(this[REGISTRY], key);\n};\n// 4.4.9\nRegistry.prototype.delete = function (key) {\n  if (Object.hasOwnProperty.call(this[REGISTRY], key)) {\n    delete this[REGISTRY][key];\n    return true;\n  }\n  return false;\n};\n\n/*\n * Simple ModuleNamespace Exotic object based on a baseObject\n * We export this for allowing a fast-path for module namespace creation over Module descriptors\n */\n// var EVALUATE = createSymbol('evaluate');\nvar BASE_OBJECT = createSymbol('baseObject');\n\n// 8.3.1 Reflect.Module\n/*\n * Best-effort simplified non-spec implementation based on\n * a baseObject referenced via getters.\n *\n * Allows:\n *\n *   loader.registry.set('x', new Module({ default: 'x' }));\n *\n * Optional evaluation function provides experimental Module.evaluate\n * support for non-executed modules in registry.\n */\nfunction ModuleNamespace (baseObject/*, evaluate*/) {\n  Object.defineProperty(this, BASE_OBJECT, {\n    value: baseObject\n  });\n\n  // evaluate defers namespace population\n  /* if (evaluate) {\n    Object.defineProperty(this, EVALUATE, {\n      value: evaluate,\n      configurable: true,\n      writable: true\n    });\n  }\n  else { */\n    Object.keys(baseObject).forEach(extendNamespace, this);\n  //}\n};\n// 8.4.2\nModuleNamespace.prototype = Object.create(null);\n\nif (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n  Object.defineProperty(ModuleNamespace.prototype, Symbol.toStringTag, {\n    value: 'Module'\n  });\n\nfunction extendNamespace (key) {\n  Object.defineProperty(this, key, {\n    enumerable: true,\n    get: function () {\n      return this[BASE_OBJECT][key];\n    }\n  });\n}\n\n/* function doEvaluate (evaluate, context) {\n  try {\n    evaluate.call(context);\n  }\n  catch (e) {\n    return e;\n  }\n}\n\n// 8.4.1 Module.evaluate... not documented or used because this is potentially unstable\nModule.evaluate = function (ns) {\n  var evaluate = ns[EVALUATE];\n  if (evaluate) {\n    ns[EVALUATE] = undefined;\n    var err = doEvaluate(evaluate);\n    if (err) {\n      // cache the error\n      ns[EVALUATE] = function () {\n        throw err;\n      };\n      throw err;\n    }\n    Object.keys(ns[BASE_OBJECT]).forEach(extendNamespace, ns);\n  }\n  // make chainable\n  return ns;\n}; */\n","import { isNode } from './common.js';\n\n/*\n * Optimized URL normalization assuming a syntax-valid URL parent\n */\nfunction throwResolveError () {\n  throw new RangeError('Unable to resolve \"' + relUrl + '\" to ' + parentUrl);\n}\nexport function resolveIfNotPlain (relUrl, parentUrl) {\n  var parentProtocol = parentUrl && parentUrl.substr(0, parentUrl.indexOf(':') + 1);\n\n  var firstChar = relUrl[0];\n  var secondChar = relUrl[1];\n\n  // protocol-relative\n  if (firstChar === '/' && secondChar === '/') {\n    if (!parentProtocol)\n      throwResolveError(relUrl, parentUrl);\n    return parentProtocol + relUrl;\n  }\n  // relative-url\n  else if (firstChar === '.' && (secondChar === '/' || secondChar === '.' && (relUrl[2] === '/' || relUrl.length === 2) || relUrl.length === 1)\n      || firstChar === '/') {\n    var parentIsPlain = !parentProtocol || parentUrl[parentProtocol.length] !== '/';\n\n    // read pathname from parent if a URL\n    // pathname taken to be part after leading \"/\"\n    var pathname;\n    if (parentIsPlain) {\n      // resolving to a plain parent -> skip standard URL prefix, and treat entire parent as pathname\n      if (parentUrl === undefined)\n        throwResolveError(relUrl, parentUrl);\n      pathname = parentUrl;\n    }\n    else if (parentUrl[parentProtocol.length + 1] === '/') {\n      // resolving to a :// so we need to read out the auth and host\n      if (parentProtocol !== 'file:') {\n        pathname = parentUrl.substr(parentProtocol.length + 2);\n        pathname = pathname.substr(pathname.indexOf('/') + 1);\n      }\n      else {\n        pathname = parentUrl.substr(8);\n      }\n    }\n    else {\n      // resolving to :/ so pathname is the /... part\n      pathname = parentUrl.substr(parentProtocol.length + 1);\n    }\n\n    if (firstChar === '/') {\n      if (parentIsPlain)\n        throwResolveError(relUrl, parentUrl);\n      else\n        return parentUrl.substr(0, parentUrl.length - pathname.length - 1) + relUrl;\n    }\n\n    // join together and split for removal of .. and . segments\n    // looping the string instead of anything fancy for perf reasons\n    // '../../../../../z' resolved to 'x/y' is just 'z' regardless of parentIsPlain\n    var segmented = pathname.substr(0, pathname.lastIndexOf('/') + 1) + relUrl;\n\n    var output = [];\n    var segmentIndex = undefined;\n\n    for (var i = 0; i < segmented.length; i++) {\n      // busy reading a segment - only terminate on '/'\n      if (segmentIndex !== undefined) {\n        if (segmented[i] === '/') {\n          output.push(segmented.substr(segmentIndex, i - segmentIndex + 1));\n          segmentIndex = undefined;\n        }\n        continue;\n      }\n\n      // new segment - check if it is relative\n      if (segmented[i] === '.') {\n        // ../ segment\n        if (segmented[i + 1] === '.' && (segmented[i + 2] === '/' || i === segmented.length - 2)) {\n          output.pop();\n          i += 2;\n        }\n        // ./ segment\n        else if (segmented[i + 1] === '/' || i === segmented.length - 1) {\n          i += 1;\n        }\n        else {\n          // the start of a new segment as below\n          segmentIndex = i;\n          continue;\n        }\n\n        // this is the plain URI backtracking error (../, package:x -> error)\n        if (parentIsPlain && output.length === 0)\n          throwResolveError(relUrl, parentUrl);\n\n        // trailing . or .. segment\n        if (i === segmented.length)\n          output.push('');\n        continue;\n      }\n\n      // it is the start of a new segment\n      segmentIndex = i;\n    }\n    // finish reading out the last segment\n    if (segmentIndex !== undefined)\n      output.push(segmented.substr(segmentIndex, segmented.length - segmentIndex));\n\n    return parentUrl.substr(0, parentUrl.length - pathname.length) + output.join('');\n  }\n\n  // sanitizes and verifies (by returning undefined if not a valid URL-like form)\n  // Windows filepath compatibility is an added convenience here\n  var protocolIndex = relUrl.indexOf(':');\n  if (protocolIndex !== -1) {\n    if (isNode) {\n      // C:\\x becomes file:///c:/x (we don't support C|\\x)\n      if (relUrl[1] === ':' && relUrl[2] === '\\\\' && relUrl[0].match(/[a-z]/i))\n        return 'file:///' + relUrl.replace(/\\\\/g, '/');\n    }\n    return relUrl;\n  }\n}\n","import { Loader, ModuleNamespace } from './loader-polyfill.js';\nimport { resolveIfNotPlain } from './resolve.js';\nimport { addToError, global, createSymbol, baseURI } from './common.js';\n\nexport default RegisterLoader;\n\n/*\n * Register Loader\n *\n * Builds directly on top of loader polyfill to provide:\n * - loader.register support\n * - hookable higher-level resolve\n * - instantiate hook returning a ModuleNamespace or undefined for es module loading\n * - loader error behaviour as in HTML and loader specs, clearing failed modules from registration cache synchronously\n * - build tracing support by providing a .trace=true and .loads object format\n */\n\nvar REGISTER_INTERNAL = createSymbol('register-internal');\n\nfunction RegisterLoader () {\n  Loader.call(this);\n\n  this[REGISTER_INTERNAL] = {\n    // last anonymous System.register call\n    lastRegister: undefined,\n    // in-flight es module load records\n    records: {}\n  }\n\n  // tracing\n  this.trace = false;\n}\n\nRegisterLoader.prototype = Object.create(Loader.prototype);\nRegisterLoader.prototype.constructor = RegisterLoader;\n\nvar INSTANTIATE = RegisterLoader.instantiate = createSymbol('instantiate');\n\n// default normalize is the WhatWG style normalizer\nRegisterLoader.prototype[RegisterLoader.resolve = Loader.resolve] = function (key, parentKey) {\n  return resolveIfNotPlain(key, parentKey || baseURI);\n};\n\nRegisterLoader.prototype[INSTANTIATE] = function (key, processAnonRegister) {};\n\n// once evaluated, the linkRecord is set to undefined leaving just the other load record properties\n// this allows tracking new binding listeners for es modules through importerSetters\n// for dynamic modules, the load record is removed entirely.\nfunction createLoadRecord (state, key, registration) {\n  return state.records[key] = {\n    key: key,\n\n    // defined System.register cache\n    registration: registration,\n\n    // module namespace object\n    module: undefined,\n\n    // es-only\n    // this sticks around so new module loads can listen to binding changes\n    // for already-loaded modules by adding themselves to their importerSetters\n    importerSetters: undefined,\n\n    // in-flight linking record\n    linkRecord: {\n      // promise for instantiated\n      instantiatePromise: undefined,\n      dependencies: undefined,\n      execute: undefined,\n      executingRequire: false,\n\n      // underlying module object bindings\n      moduleObj: undefined,\n\n      // es only, also indicates if es or not\n      setters: undefined,\n\n      // promise for instantiated dependencies (dependencyInstantiations populated)\n      depsInstantiatePromise: undefined,\n      // will be the array of dependency load record or a module namespace\n      dependencyInstantiations: undefined,\n\n      // indicates if the load and all its dependencies are instantiated and linked\n      // but not yet executed\n      // mostly just a performance shortpath to avoid rechecking the promises above\n      linked: false,\n\n      error: undefined\n      // NB optimization and way of ensuring module objects in setters\n      // indicates setters which should run pre-execution of that dependency\n      // setters is then just for completely executed module objects\n      // alternatively we just pass the partially filled module objects as\n      // arguments into the execute function\n      // hoisted: undefined\n    }\n  };\n}\n\nRegisterLoader.prototype[Loader.resolveInstantiate] = function (key, parentKey) {\n  var loader = this;\n  var state = this[REGISTER_INTERNAL];\n  var registry = loader.registry[loader.registry._registry];\n\n  return resolveInstantiate(loader, key, parentKey, registry, state)\n  .then(function (instantiated) {\n    if (instantiated instanceof ModuleNamespace)\n      return instantiated;\n\n    // if already beaten to linked, return\n    if (instantiated.module)\n      return instantiated.module;\n\n    // resolveInstantiate always returns a load record with a link record and no module value\n    if (instantiated.linkRecord.linked)\n      return ensureEvaluate(loader, instantiated, instantiated.linkRecord, registry, state, undefined);\n\n    return instantiateDeps(loader, instantiated, instantiated.linkRecord, registry, state, [instantiated])\n    .then(function () {\n      return ensureEvaluate(loader, instantiated, instantiated.linkRecord, registry, state, undefined);\n    })\n    .catch(function (err) {\n      clearLoadErrors(loader, instantiated);\n      throw err;\n    });\n  });\n};\n\nfunction resolveInstantiate (loader, key, parentKey, registry, state) {\n  // normalization shortpath for already-normalized key\n  // could add a plain name filter, but doesn't yet seem necessary for perf\n  var module = registry[key];\n  if (module)\n    return Promise.resolve(module);\n\n  var load = state.records[key];\n\n  // already linked but not in main registry is ignored\n  if (load && !load.module)\n    return instantiate(loader, load, load.linkRecord, registry, state);\n\n  return loader.resolve(key, parentKey)\n  .then(function (resolvedKey) {\n    // main loader registry always takes preference\n    module = registry[resolvedKey];\n    if (module)\n      return module;\n\n    load = state.records[resolvedKey];\n\n    // already has a module value but not already in the registry (load.module)\n    // means it was removed by registry.delete, so we should\n    // disgard the current load record creating a new one over it\n    // but keep any existing registration\n    if (!load || load.module)\n      load = createLoadRecord(state, resolvedKey, load && load.registration);\n\n    var link = load.linkRecord;\n    if (!link)\n      return load;\n\n    return instantiate(loader, load, link, registry, state);\n  });\n}\n\nfunction createProcessAnonRegister (loader, load, state) {\n  return function () {\n    var lastRegister = state.lastRegister;\n\n    if (!lastRegister)\n      return !!load.registration;\n\n    state.lastRegister = undefined;\n    load.registration = lastRegister;\n\n    return true;\n  };\n}\n\nfunction instantiate (loader, load, link, registry, state) {\n  return link.instantiatePromise || (link.instantiatePromise =\n  // if there is already an existing registration, skip running instantiate\n  (load.registration ? Promise.resolve() : Promise.resolve().then(function () {\n    state.lastRegister = undefined;\n    return loader[INSTANTIATE](load.key, loader[INSTANTIATE].length > 1 && createProcessAnonRegister(loader, load, state));\n  }))\n  .then(function (instantiation) {\n    // direct module return from instantiate -> we're done\n    if (instantiation !== undefined) {\n      if (!(instantiation instanceof ModuleNamespace))\n        throw new TypeError('Instantiate did not return a valid Module object.');\n\n      delete state.records[load.key];\n      if (loader.trace)\n        traceLoad(loader, load, link);\n      return registry[load.key] = instantiation;\n    }\n\n    // run the cached loader.register declaration if there is one\n    var registration = load.registration;\n    // clear to allow new registrations for future loads (combined with registry delete)\n    load.registration = undefined;\n    if (!registration)\n      throw new TypeError('Module instantiation did not call an anonymous or correctly named System.register.');\n\n    link.dependencies = registration[0];\n\n    load.importerSetters = [];\n\n    link.moduleObj = {};\n\n    // process System.registerDynamic declaration\n    if (registration[2]) {\n      link.moduleObj.default = {};\n      link.moduleObj.__useDefault = true;\n      link.executingRequire = registration[1];\n      link.execute = registration[2];\n    }\n\n    // process System.register declaration\n    else {\n      registerDeclarative(loader, load, link, registration[1]);\n    }\n\n    // shortpath to instantiateDeps\n    if (!link.dependencies.length) {\n      link.linked = true;\n      if (loader.trace)\n        traceLoad(loader, load, link);\n    }\n\n    return load;\n  })\n  .catch(function (err) {\n    throw link.error = addToError(err, 'Instantiating ' + load.key);\n  }));\n}\n\n// like resolveInstantiate, but returning load records for linking\nfunction resolveInstantiateDep (loader, key, parentKey, registry, state, traceDepMap) {\n  // normalization shortpaths for already-normalized key\n  // DISABLED to prioritise consistent resolver calls\n  // could add a plain name filter, but doesn't yet seem necessary for perf\n  /* var load = state.records[key];\n  var module = registry[key];\n\n  if (module) {\n    if (traceDepMap)\n      traceDepMap[key] = key;\n\n    // registry authority check in case module was deleted or replaced in main registry\n    if (load && load.module && load.module === module)\n      return load;\n    else\n      return module;\n  }\n\n  // already linked but not in main registry is ignored\n  if (load && !load.module) {\n    if (traceDepMap)\n      traceDepMap[key] = key;\n    return instantiate(loader, load, load.linkRecord, registry, state);\n  } */\n  return loader.resolve(key, parentKey)\n  .then(function (resolvedKey) {\n    if (traceDepMap)\n      traceDepMap[key] = key;\n\n    // normalization shortpaths for already-normalized key\n    var load = state.records[resolvedKey];\n    var module = registry[resolvedKey];\n\n    // main loader registry always takes preference\n    if (module && (!load || load.module && module !== load.module))\n      return module;\n\n    // already has a module value but not already in the registry (load.module)\n    // means it was removed by registry.delete, so we should\n    // disgard the current load record creating a new one over it\n    // but keep any existing registration\n    if (!load || !module && load.module)\n      load = createLoadRecord(state, resolvedKey, load && load.registration);\n\n    var link = load.linkRecord;\n    if (!link)\n      return load;\n\n    return instantiate(loader, load, link, registry, state);\n  });\n}\n\nfunction traceLoad (loader, load, link) {\n  loader.loads = loader.loads || {};\n  loader.loads[load.key] = {\n    key: load.key,\n    deps: link.dependencies,\n    depMap: link.depMap || {}\n  };\n}\n\n/*\n * Convert a CJS module.exports into a valid object for new Module:\n *\n *   new Module(getEsModule(module.exports))\n *\n * Sets the default value to the module, while also reading off named exports carefully.\n */\nfunction registerDeclarative (loader, load, link, declare) {\n  var moduleObj = link.moduleObj;\n  var importerSetters = load.importerSetters;\n\n  var locked = false;\n\n  // closure especially not based on link to allow link record disposal\n  var declared = declare.call(global, function (name, value) {\n    // export setter propogation with locking to avoid cycles\n    if (locked)\n      return;\n\n    if (typeof name === 'object') {\n      for (var p in name)\n        if (p !== '__useDefault')\n          moduleObj[p] = name[p];\n    }\n    else {\n      moduleObj[name] = value;\n    }\n\n    locked = true;\n    for (var i = 0; i < importerSetters.length; i++)\n      importerSetters[i](moduleObj);\n    locked = false;\n\n    return value;\n  }, new ContextualLoader(loader, load.key));\n\n  link.setters = declared.setters;\n  link.execute = declared.execute;\n  if (declared.exports)\n    link.moduleObj = moduleObj = declared.exports;\n}\n\nfunction instantiateDeps (loader, load, link, registry, state, seen) {\n  return (link.depsInstantiatePromise || (link.depsInstantiatePromise = Promise.resolve()\n  .then(function () {\n    var depsInstantiatePromises = Array(link.dependencies.length);\n\n    for (var i = 0; i < link.dependencies.length; i++)\n      depsInstantiatePromises[i] = resolveInstantiateDep(loader, link.dependencies[i], load.key, registry, state, loader.trace && (link.depMap = {}));\n\n    return Promise.all(depsInstantiatePromises);\n  })\n  .then(function (dependencyInstantiations) {\n    link.dependencyInstantiations = dependencyInstantiations;\n\n    // run setters to set up bindings to instantiated dependencies\n    if (link.setters) {\n      for (var i = 0; i < dependencyInstantiations.length; i++) {\n        var setter = link.setters[i];\n        if (setter) {\n          var instantiation = dependencyInstantiations[i];\n\n          if (instantiation instanceof ModuleNamespace) {\n            setter(instantiation);\n          }\n          else {\n            setter(instantiation.module || instantiation.linkRecord.moduleObj);\n            // this applies to both es and dynamic registrations\n            if (instantiation.importerSetters)\n              instantiation.importerSetters.push(setter);\n          }\n        }\n      }\n    }\n  })))\n  .then(function () {\n    // now deeply instantiateDeps on each dependencyInstantiation that is a load record\n    var deepDepsInstantiatePromises = [];\n\n    for (var i = 0; i < link.dependencies.length; i++) {\n      var depLoad = link.dependencyInstantiations[i];\n      var depLink = depLoad.linkRecord;\n\n      if (!depLink || depLink.linked)\n        continue;\n\n      if (seen.indexOf(depLoad) !== -1)\n        continue;\n      seen.push(depLoad);\n\n      deepDepsInstantiatePromises.push(instantiateDeps(loader, depLoad, depLoad.linkRecord, registry, state, seen));\n    }\n\n    return Promise.all(deepDepsInstantiatePromises);\n  })\n  .then(function () {\n    // as soon as all dependencies instantiated, we are ready for evaluation so can add to the registry\n    // this can run multiple times, but so what\n    link.linked = true;\n    if (loader.trace)\n      traceLoad(loader, load, link);\n\n    return load;\n  })\n  .catch(function (err) {\n    err = addToError(err, 'Loading ' + load.key);\n\n    // throw up the instantiateDeps stack\n    // loads are then synchonously cleared at the top-level through the clearLoadErrors helper below\n    // this then ensures avoiding partially unloaded tree states\n    link.error = link.error || err;\n\n    throw err;\n  });\n}\n\n// clears an errored load and all its errored dependencies from the loads registry\nfunction clearLoadErrors (loader, load) {\n  var state = loader[REGISTER_INTERNAL];\n\n  // clear from loads\n  if (state.records[load.key] === load)\n    delete state.records[load.key];\n\n  var link = load.linkRecord;\n\n  if (!link)\n    return;\n\n  if (link.dependencyInstantiations)\n    link.dependencyInstantiations.forEach(function (depLoad, index) {\n      if (!depLoad || depLoad instanceof ModuleNamespace)\n        return;\n\n      if (depLoad.linkRecord) {\n        if (depLoad.linkRecord.error) {\n          // provides a circular reference check\n          if (state.records[depLoad.key] === depLoad)\n            clearLoadErrors(loader, depLoad);\n        }\n\n        // unregister setters for es dependency load records that will remain\n        if (link.setters && depLoad.importerSetters) {\n          var setterIndex = depLoad.importerSetters.indexOf(link.setters[index]);\n          depLoad.importerSetters.splice(setterIndex, 1);\n        }\n      }\n    });\n}\n\n/*\n * System.register\n */\nRegisterLoader.prototype.register = function (key, deps, declare) {\n  var state = this[REGISTER_INTERNAL];\n\n  // anonymous modules get stored as lastAnon\n  if (declare === undefined) {\n    state.lastRegister = [key, deps, undefined];\n  }\n\n  // everything else registers into the register cache\n  else {\n    var load = state.records[key] || createLoadRecord(state, key, undefined);\n    load.registration = [deps, declare, undefined];\n  }\n};\n\n/*\n * System.registerDyanmic\n */\nRegisterLoader.prototype.registerDynamic = function (key, deps, executingRequire, execute) {\n  var state = this[REGISTER_INTERNAL];\n\n  // anonymous modules get stored as lastAnon\n  if (typeof key !== 'string') {\n    state.lastRegister = [key, deps, executingRequire];\n  }\n\n  // everything else registers into the register cache\n  else {\n    var load = state.records[key] || createLoadRecord(state, key, undefined);\n    load.registration = [deps, executingRequire, execute];\n  }\n};\n\n// ContextualLoader class\n// backwards-compatible with previous System.register context argument by exposing .id\nfunction ContextualLoader (loader, key) {\n  this.loader = loader;\n  this.key = this.id = key;\n}\nContextualLoader.prototype.constructor = function () {\n  throw new TypeError('Cannot subclass the contextual loader only Reflect.Loader.');\n};\nContextualLoader.prototype.import = function (key) {\n  return this.loader.import(key, this.key);\n};\nContextualLoader.prototype.resolve = function (key) {\n  return this.loader.resolve(key, this.key);\n};\nContextualLoader.prototype.load = function (key) {\n  return this.loader.load(key, this.key);\n};\n\n// this is the execution function bound to the Module namespace record\nfunction ensureEvaluate (loader, load, link, registry, state, seen) {\n  if (load.module)\n    return load.module;\n\n  if (link.error)\n    throw link.error;\n\n  if (seen && seen.indexOf(load) !== -1)\n    return load.linkRecord.moduleObj;\n\n  // for ES loads we always run ensureEvaluate on top-level, so empty seen is passed regardless\n  // for dynamic loads, we pass seen if also dynamic\n  var err = doEvaluate(loader, load, link, registry, state, link.setters ? [] : seen || []);\n  if (err) {\n    clearLoadErrors(loader, load);\n    throw err;\n  }\n\n  return load.module;\n}\n\nfunction makeDynamicRequire (loader, key, dependencies, dependencyInstantiations, registry, state, seen) {\n  // we can only require from already-known dependencies\n  return function (name) {\n    for (var i = 0; i < dependencies.length; i++) {\n      if (dependencies[i] === name) {\n        var depLoad = dependencyInstantiations[i];\n        var module;\n\n        if (depLoad instanceof ModuleNamespace)\n          module = depLoad;\n        else\n          module = ensureEvaluate(loader, depLoad, depLoad.linkRecord, registry, state, seen);\n\n        return module.__useDefault ? module.default : module;\n      }\n    }\n    throw new Error('Module ' + name + ' not declared as a System.registerDynamic dependency of ' + key);\n  };\n}\n\n// ensures the given es load is evaluated\n// returns the error if any\nfunction doEvaluate (loader, load, link, registry, state, seen) {\n  seen.push(load);\n\n  var err;\n\n  // es modules evaluate dependencies first\n  // non es modules explicitly call moduleEvaluate through require\n  if (link.setters) {\n    var depLoad, depLink;\n    for (var i = 0; i < link.dependencies.length; i++) {\n      depLoad = link.dependencyInstantiations[i];\n\n      if (depLoad instanceof ModuleNamespace)\n        continue;\n\n      // custom Module returned from instantiate\n      depLink = depLoad.linkRecord;\n      if (depLink && seen.indexOf(depLoad) === -1) {\n        if (depLink.error)\n          err = depLink.error;\n        else\n          // dynamic / declarative boundaries clear the \"seen\" list\n          // we just let cross format circular throw as would happen in real implementations\n          err = doEvaluate(loader, depLoad, depLink, registry, state, depLink.setters ? seen : []);\n      }\n\n      if (err)\n        return link.error = addToError(err, 'Evaluating ' + load.key);\n    }\n  }\n\n  // link.execute won't exist for Module returns from instantiate on top-level load\n  if (link.execute) {\n    // ES System.register execute\n    // \"this\" is null in ES\n    if (link.setters) {\n      err = declarativeExecute(link.execute);\n    }\n    // System.registerDynamic execute\n    // \"this\" is \"exports\" in CJS\n    else {\n      var module = { id: load.key };\n      var moduleObj = link.moduleObj;\n      Object.defineProperty(module, 'exports', {\n        configurable: true,\n        set: function (exports) {\n          moduleObj.default = exports;\n        },\n        get: function () {\n          return moduleObj.default;\n        }\n      });\n\n      var require = makeDynamicRequire(loader, load.key, link.dependencies, link.dependencyInstantiations, registry, state, seen);\n\n      // evaluate deps first\n      if (!link.executingRequire)\n        for (var i = 0; i < link.dependencies.length; i++)\n          require(link.dependencies[i]);\n\n      err = dynamicExecute(link.execute, require, moduleObj.default, module);\n\n      // pick up defineProperty calls to module.exports when we can\n      if (module.exports !== moduleObj.default)\n        moduleObj.default = module.exports;\n\n      // __esModule flag extension support\n      if (moduleObj.default && moduleObj.default.__esModule)\n        for (var p in moduleObj.default)\n          if (Object.hasOwnProperty.call(moduleObj.default, p) && p !== 'default')\n            moduleObj[p] = moduleObj.default[p];\n    }\n  }\n\n  if (err)\n    return link.error = addToError(err, 'Evaluating ' + load.key);\n\n  registry[load.key] = load.module = new ModuleNamespace(link.moduleObj);\n\n  // if not an esm module, run importer setters and clear them\n  // this allows dynamic modules to update themselves into es modules\n  // as soon as execution has completed\n  if (!link.setters) {\n    if (load.importerSetters)\n      for (var i = 0; i < load.importerSetters.length; i++)\n        load.importerSetters[i](load.module);\n    load.importerSetters = undefined;\n  }\n\n  // dispose link record\n  load.linkRecord = undefined;\n}\n\n// {} is the closest we can get to call(undefined)\nvar nullContext = {};\nif (Object.freeze)\n  Object.freeze(nullContext);\n\nfunction declarativeExecute (execute) {\n  try {\n    execute.call(nullContext);\n  }\n  catch (e) {\n    return e;\n  }\n}\n\nfunction dynamicExecute (execute, require, exports, module) {\n  try {\n    var output = execute.call(global, require, exports, module);\n    if (output !== undefined)\n      module.exports = output;\n  }\n  catch (e) {\n    return e;\n  }\n}\n","// https://github.com/ModuleLoader/es-module-loader\n\nimport RegisterLoader from \"es-module-loader/core/register-loader.js\"\nimport { baseURI } from \"es-module-loader/core/common.js\"\nimport { resolveIfNotPlain } from \"es-module-loader/core/resolve.js\"\n\nexport const createLoader = ({\n\tbase,\n\tresolve = RegisterLoader.prototype[RegisterLoader.resolve],\n\tinstantiate = RegisterLoader.prototype[RegisterLoader.instantiate],\n} = {}) => {\n\tconst loader = new RegisterLoader()\n\n\tif (base) {\n\t\tbase = resolveIfNotPlain(base, baseURI) || resolveIfNotPlain(`./${base}`, baseURI)\n\t} else {\n\t\tbase = baseURI\n\t}\n\n\tif (base[base.length - 1] !== \"/\") {\n\t\tbase += \"/\"\n\t}\n\n\tloader[RegisterLoader.resolve] = function(key, parent = base) {\n\t\treturn resolve.call(this, key, parent) || key\n\t}\n\n\tloader[RegisterLoader.instantiate] = instantiate\n\n\treturn loader\n}\n","// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n// (MIT licensed)\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\n/**\n * body.js\n *\n * Body interface provides common methods for Request and Response\n */\n\nconst Stream = require('stream');\n\nvar _require = require('stream');\n\nconst PassThrough = _require.PassThrough;\n\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t} else if (body instanceof Blob) {\n\t\t// body is blob\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t} else {\n\t\t// none of the above\n\t\t// coerce to string\n\t\tbody = String(body);\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\t_this[INTERNALS].error = new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\t// body is null\n\tif (this.body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is string\n\tif (typeof this.body === 'string') {\n\t\treturn Body.Promise.resolve(Buffer.from(this.body));\n\t}\n\n\t// body is blob\n\tif (this.body instanceof Blob) {\n\t\treturn Body.Promise.resolve(this.body[BUFFER]);\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(this.body)) {\n\t\treturn Body.Promise.resolve(this.body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(this.body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream error, such as incorrect content-encoding\n\t\t_this4.body.on('error', function (err) {\n\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t});\n\n\t\t_this4.body.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\t_this4.body.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\t\t\tresolve(Buffer.concat(accum));\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Response or Request instance\n */\nfunction extractContentType(instance) {\n\tconst body = instance.body;\n\n\t// istanbul ignore if: Currently, because of a guard in Request, body\n\t// can never be null. Included here for completeness.\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (body instanceof Blob) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\t// istanbul ignore if: included for completion\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn Buffer.byteLength(body);\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is URLSearchParams\n\t\treturn Buffer.byteLength(String(body));\n\t} else if (body instanceof Blob) {\n\t\t// body is blob\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is URLSearchParams\n\t\tdest.write(Buffer.from(String(body)));\n\t\tdest.end();\n\t} else if (body instanceof Blob) {\n\t\t// body is blob\n\t\tdest.write(body[BUFFER]);\n\t\tdest.end();\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * A set of utilities borrowed from Node.js' _http_common.js\n */\n\n/**\n * Verifies that the given val is a valid HTTP token\n * per the rules defined in RFC 7230\n * See https://tools.ietf.org/html/rfc7230#section-3.2.6\n *\n * Allowed characters in an HTTP token:\n * ^_`a-z  94-122\n * A-Z     65-90\n * -       45\n * 0-9     48-57\n * !       33\n * #$%&'   35-39\n * *+      42-43\n * .       46\n * |       124\n * ~       126\n *\n * This implementation of checkIsHttpToken() loops over the string instead of\n * using a regular expression since the former is up to 180% faster with v8 4.9\n * depending on the string length (the shorter the string, the larger the\n * performance difference)\n *\n * Additionally, checkIsHttpToken() is currently designed to be inlinable by v8,\n * so take care when making changes to the implementation so that the source\n * code size does not exceed v8's default max_inlined_source_size setting.\n **/\n/* istanbul ignore next */\nfunction isValidTokenChar(ch) {\n  if (ch >= 94 && ch <= 122) return true;\n  if (ch >= 65 && ch <= 90) return true;\n  if (ch === 45) return true;\n  if (ch >= 48 && ch <= 57) return true;\n  if (ch === 34 || ch === 40 || ch === 41 || ch === 44) return false;\n  if (ch >= 33 && ch <= 46) return true;\n  if (ch === 124 || ch === 126) return true;\n  return false;\n}\n/* istanbul ignore next */\nfunction checkIsHttpToken(val) {\n  if (typeof val !== 'string' || val.length === 0) return false;\n  if (!isValidTokenChar(val.charCodeAt(0))) return false;\n  const len = val.length;\n  if (len > 1) {\n    if (!isValidTokenChar(val.charCodeAt(1))) return false;\n    if (len > 2) {\n      if (!isValidTokenChar(val.charCodeAt(2))) return false;\n      if (len > 3) {\n        if (!isValidTokenChar(val.charCodeAt(3))) return false;\n        for (var i = 4; i < len; i++) {\n          if (!isValidTokenChar(val.charCodeAt(i))) return false;\n        }\n      }\n    }\n  }\n  return true;\n}\n/**\n * True if val contains an invalid field-vchar\n *  field-value    = *( field-content / obs-fold )\n *  field-content  = field-vchar [ 1*( SP / HTAB ) field-vchar ]\n *  field-vchar    = VCHAR / obs-text\n *\n * checkInvalidHeaderChar() is currently designed to be inlinable by v8,\n * so take care when making changes to the implementation so that the source\n * code size does not exceed v8's default max_inlined_source_size setting.\n **/\n/* istanbul ignore next */\nfunction checkInvalidHeaderChar(val) {\n  val += '';\n  if (val.length < 1) return false;\n  var c = val.charCodeAt(0);\n  if (c <= 31 && c !== 9 || c > 255 || c === 127) return true;\n  if (val.length < 2) return false;\n  c = val.charCodeAt(1);\n  if (c <= 31 && c !== 9 || c > 255 || c === 127) return true;\n  if (val.length < 3) return false;\n  c = val.charCodeAt(2);\n  if (c <= 31 && c !== 9 || c > 255 || c === 127) return true;\n  for (var i = 3; i < val.length; ++i) {\n    c = val.charCodeAt(i);\n    if (c <= 31 && c !== 9 || c > 255 || c === 127) return true;\n  }\n  return false;\n}\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nfunction sanitizeName(name) {\n\tname += '';\n\tif (!checkIsHttpToken(name)) {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n\treturn name.toLowerCase();\n}\n\nfunction sanitizeValue(value) {\n\tvalue += '';\n\tif (checkInvalidHeaderChar(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n\treturn value;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) {\n\t\t\t// no op\n\t\t} else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return first header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tconst list = this[MAP][sanitizeName(name)];\n\t\tif (!list) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn list.join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaderPairs(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaderPairs(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tthis[MAP][sanitizeName(name)] = [sanitizeValue(value)];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tif (!this.has(name)) {\n\t\t\tthis.set(name, value);\n\t\t\treturn;\n\t\t}\n\n\t\tthis[MAP][sanitizeName(name)].push(sanitizeValue(value));\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\treturn !!this[MAP][sanitizeName(name)];\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tdelete this[MAP][sanitizeName(name)];\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaderPairs(headers, kind) {\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn [k];\n\t} : function (k) {\n\t\treturn [k, headers.get(k)];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaderPairs(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tconst pair = values[index];\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\tlet result;\n\t\tif (kind === 'key') {\n\t\t\tresult = pair[0];\n\t\t} else if (kind === 'value') {\n\t\t\tresult = pair[1];\n\t\t} else {\n\t\t\tresult = pair;\n\t\t}\n\n\t\treturn {\n\t\t\tvalue: result,\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * response.js\n *\n * Response class provides content decoding\n */\n\nvar _require$1 = require('http');\n\nconst STATUS_CODES = _require$1.STATUS_CODES;\n\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders: new Headers(opts.headers)\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url;\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * request.js\n *\n * Request class contains server only options\n */\n\nvar _require$2 = require('url');\n\nconst format_url = _require$2.format;\nconst parse_url = _require$2.parse;\n\n\nconst INTERNALS$2 = Symbol('Request internals');\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parse_url(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parse_url(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parse_url(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (init.body != null) {\n\t\t\tconst contentType = extractContentType(this);\n\t\t\tif (contentType !== null && !headers.has('Content-Type')) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 5-9\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 12\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 16\n\tif (request.compress) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\tif (!headers.has('Connection') && !request.agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: headers.raw(),\n\t\tagent: request.agent\n\t});\n}\n\n/**\n * index.js\n *\n * a request API compatible with window.fetch\n */\n\nconst http = require('http');\nconst https = require('https');\n\nvar _require$3 = require('stream');\n\nconst PassThrough$1 = _require$3.PassThrough;\n\nvar _require2 = require('url');\n\nconst resolve_url = _require2.resolve;\n\nconst zlib = require('zlib');\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\n\t\t// http.request only support string as host header, this hack make custom host header possible\n\t\tif (options.headers.host) {\n\t\t\toptions.headers.host = options.headers.host[0];\n\t\t}\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treq.abort();\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\tclearTimeout(reqTimeout);\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\t// handle redirect\n\t\t\tif (fetch.isRedirect(res.statusCode) && request.redirect !== 'manual') {\n\t\t\t\tif (request.redirect === 'error') {\n\t\t\t\t\treject(new FetchError(`redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!res.headers.location) {\n\t\t\t\t\treject(new FetchError(`redirect location header missing at: ${request.url}`, 'invalid-redirect'));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Create a new Request object.\n\t\t\t\tconst requestOpts = {\n\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\tagent: request.agent,\n\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\tmethod: request.method\n\t\t\t\t};\n\n\t\t\t\t// per fetch spec, for POST request with 301/302 response, or any request with 303 response, use GET when following redirect\n\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t}\n\n\t\t\t\tresolve(fetch(new Request(resolve_url(request.url, res.headers.location), requestOpts)));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// normalize location header for manual redirect mode\n\t\t\tconst headers = new Headers();\n\t\t\tfor (const name of Object.keys(res.headers)) {\n\t\t\t\tif (Array.isArray(res.headers[name])) {\n\t\t\t\t\tfor (const val of res.headers[name]) {\n\t\t\t\t\t\theaders.append(name, val);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\theaders.append(name, res.headers[name]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (request.redirect === 'manual' && headers.has('location')) {\n\t\t\t\theaders.set('location', resolve_url(request.url, headers.get('location')));\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 16.1.2\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 16.1.3: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresolve(new Response(body, response_options));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresolve(new Response(body, response_options));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresolve(new Response(body, response_options));\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresolve(new Response(body, response_options));\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// Needed for TypeScript.\nfetch.default = fetch;\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError };\n","import fetch from \"node-fetch/lib/index.es.js\"\nimport https from \"https\"\nimport fs from \"fs\"\n\nhttps.globalAgent.options.rejectUnauthorized = false\n\nexport const fetchModuleFromServer = (key) => fetch(key).then((response) => response.text())\n\nexport const fetchModuleFromFileSystem = (key) =>\n\tnew Promise((resolve, reject) => {\n\t\tfs.readFile(key, (error, buffer) => {\n\t\t\tif (error) {\n\t\t\t\treject(error)\n\t\t\t} else {\n\t\t\t\tresolve(String(buffer))\n\t\t\t}\n\t\t})\n\t})\n","import Module from \"module\"\nimport repl from \"repl\"\n\nexport const isNodeBuiltinModule = (moduleName) => {\n\t// https://nodejs.org/api/modules.html#modules_module_builtinmodules\n\tif (\"builtinModules\" in Module) {\n\t\treturn Module.builtinModules.includes(moduleName)\n\t}\n\t// https://stackoverflow.com/a/35825896\n\treturn repl._builtinLibs.includes(moduleName)\n}\n","// https://github.com/ModuleLoader/node-es-module-loader\n\nimport { ModuleNamespace } from \"es-module-loader/core/loader-polyfill.js\"\nimport { isNode, fileUrlToPath } from \"es-module-loader/core/common.js\"\n\nimport { createLoader } from \"../createLoader.js\"\nimport { fetchModuleFromServer, fetchModuleFromFileSystem } from \"./fetchModule.js\"\nimport { isNodeBuiltinModule } from \"./isNodeBuiltinModule.js\"\n\nconst fetchModuleSource = (key) => {\n  if (key.indexOf(\"file:\") === 0) {\n    return fetchModuleFromFileSystem(fileUrlToPath(key))\n  }\n  if (key.indexOf(\"http:\") === 0 || key.indexOf(\"https:\") === 0) {\n    return fetchModuleFromServer(key)\n  }\n  throw new Error(`unsupported protocol for module ${key}`)\n}\n\nexport const createNodeLoader = ({ base } = {}) => {\n  if (!isNode) {\n    throw new Error(\"Node module loader can only be used in Node\")\n  }\n\n  return createLoader({\n    base,\n    instantiate: (key, processAnonRegister) => {\n      if (isNodeBuiltinModule(key)) {\n        const nodeBuiltinModuleExports = require(key) // eslint-disable-line import/no-dynamic-require\n        const bindings = Object.assign({}, nodeBuiltinModuleExports, {\n          default: nodeBuiltinModuleExports,\n        })\n        return Promise.resolve(new ModuleNamespace(bindings))\n      }\n\n      return fetchModuleSource(key).then((source) => {\n        ;(0, eval)(source)\n        processAnonRegister()\n      })\n    },\n  })\n}\n"],"names":["isBrowser","window","document","isNode","process","versions","node","isWindows","platform","match","envGlobal","self","global","hasSymbol","Symbol","createSymbol","name","fileUrlToPath","fileUrl","substr","RangeError","replace","baseURI","getElementsByTagName","bases","href","location","split","lastIndexOf","cwd","TypeError","length","errArgs","Error","fileName","LoaderError__Check_error_message_for_loader_stack","childErr","newMessage","message","err","lineNumber","stack","originalErr","resolvedPromise","Promise","resolve","arrayValues","arr","values","iterator","iterable","keys","Object","keyIndex","undefined","Loader","registry","Registry","prototype","constructor","ensureInstantiated","module","ModuleNamespace","key","parent","loader","then","RESOLVE_INSTANTIATE","addToError","RESOLVE","resolveInstantiate","resolved","get","ensureResolution","resolvedKey","iteratorSupport","REGISTRY","_registry","entries","map","set","namespace","has","hasOwnProperty","call","BASE_OBJECT","baseObject","defineProperty","forEach","extendNamespace","create","toStringTag","throwResolveError","relUrl","parentUrl","resolveIfNotPlain","parentProtocol","indexOf","firstChar","secondChar","parentIsPlain","pathname","segmented","output","segmentIndex","i","push","pop","join","protocolIndex","REGISTER_INTERNAL","RegisterLoader","trace","INSTANTIATE","instantiate","parentKey","processAnonRegister","createLoadRecord","state","registration","records","instantiated","linkRecord","linked","ensureEvaluate","instantiateDeps","load","link","createProcessAnonRegister","lastRegister","instantiatePromise","instantiation","traceLoad","dependencies","importerSetters","moduleObj","__useDefault","executingRequire","execute","error","resolveInstantiateDep","traceDepMap","loads","depMap","registerDeclarative","declare","locked","declared","value","p","ContextualLoader","setters","exports","seen","depsInstantiatePromise","depsInstantiatePromises","Array","all","dependencyInstantiations","setter","deepDepsInstantiatePromises","depLoad","depLink","clearLoadErrors","index","setterIndex","splice","register","deps","registerDynamic","id","doEvaluate","makeDynamicRequire","declarativeExecute","require","dynamicExecute","__esModule","nullContext","freeze","e","createLoader","base","BUFFER","TYPE","Blob","blobParts","arguments","options","buffers","a","Number","element","buffer","Buffer","ArrayBuffer","isView","from","byteOffset","byteLength","String","concat","type","toLowerCase","test","size","start","end","relativeStart","relativeEnd","Math","max","min","span","slicedBuffer","slice","blob","defineProperties","enumerable","FetchError","systemError","code","errno","captureStackTrace","Stream","_require","PassThrough","convert","INTERNALS","Body","body","_this","_ref","_ref$size","_ref$timeout","timeout","isURLSearchParams","isBuffer","on","url","consumeBody","buf","ct","headers","assign","_this2","JSON","parse","toString","reject","_this3","convertBody","disturbed","mixIn","proto","getOwnPropertyNames","desc","getOwnPropertyDescriptor","_this4","alloc","accum","accumBytes","abort","resTimeout","setTimeout","chunk","charset","res","str","exec","obj","append","getAll","sort","clone","instance","p1","p2","bodyUsed","getBoundary","pipe","extractContentType","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","writeToStream","dest","write","isValidTokenChar","ch","checkIsHttpToken","val","charCodeAt","len","checkInvalidHeaderChar","c","sanitizeName","sanitizeValue","MAP","Headers","init","rawHeaders","raw","headerNames","headerName","method","pairs","pair","list","callback","thisArg","getHeaderPairs","_pairs$i","createHeadersIterator","kind","k","INTERNAL","target","HeadersIteratorPrototype","setPrototypeOf","getPrototypeOf","_INTERNAL","result","_require$1","STATUS_CODES","INTERNALS$1","Response","opts","status","statusText","ok","_require$2","format_url","format","parse_url","INTERNALS$2","isRequest","input","Request","parsedURL","toUpperCase","inputBody","contentType","redirect","follow","compress","counter","agent","getNodeRequestOptions","request","protocol","hostname","contentLengthValue","totalBytes","http","https","_require$3","PassThrough$1","_require2","resolve_url","zlib","fetch","send","host","req","reqTimeout","once","socket","isRedirect","statusCode","requestOpts","isArray","response_options","statusMessage","codings","zlibOptions","Z_SYNC_FLUSH","createGunzip","createInflate","createInflateRaw","globalAgent","rejectUnauthorized","fetchModuleFromServer","response","text","fetchModuleFromFileSystem","readFile","isNodeBuiltinModule","moduleName","Module","builtinModules","includes","repl","_builtinLibs","fetchModuleSource","createNodeLoader","nodeBuiltinModuleExports","bindings","source","eval"],"mappings":"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"}